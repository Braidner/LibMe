!function(){"use strict";function e(e){"ngInject";e.activeTab="/",e.$on("$routeChangeStart",function(t,n){n.$$route&&(e.activeTab=n.$$route.originalPath)})}function t(e,t){"ngInject";e.otherwise({redirectTo:"/"}),t.html5Mode(!0)}function n(e){"ngInject";function t(t){var n,i=$(".menu-indicator"),o=$(".active-menu").index();n=e.tabs[t.index],o>t.index?(i.removeClass("right"),i.addClass("left"),i.css({left:n.left}),i.css({right:n.right})):(i.removeClass("left"),i.addClass("right"),i.css({right:n.right}),i.css({left:n.left}))}e.$on("$routeChangeStart",function(n,i){var o=$("menu ul").width();$("menu ul li").each(function(n,i){var r=$(i).outerWidth(),l=e.tabs[n];if(l.index=n,0===n)l.left=0,l.right=o-r;else{var a=e.tabs[n-1];l.left=o-a.right,l.right=a.right-r}e.activeTab.indexOf(l.id)>-1&&t(l)})}),e.tabs=[new i("/","Все"),new i("/film","Фильмы"),new i("/serial","Сериалы"),new i("/anime","Аниме"),new i("/other","Прочее")],e.selectTab=t}function i(e,t,n){this.id=e,this.name=t,this.selected=n}t.$inject=["$routeProvider","$locationProvider"],e.$inject=["$rootScope"],n.$inject=["$scope"],angular.module("App",["ngRoute","ngAnimate","ContentModule","ContentCardModule","ItemModule","UploadModule","RecentModule"]).config(t).run(e).controller("NavigationCtrl",n),i.prototype={id:"",name:"",selected:!1},angular.module("App").directive("background",function(){return function(e,t,n){var i=n.background;t.css({"background-image":"url("+i+")","background-size":"cover"})}})}(),function(){function e(e){"ngInject";e.when("/",{templateUrl:"/app/content/content.html",controller:"AllContentCtrl"}).when("/film",{templateUrl:"/app/content/content.html",controller:"FilmContentCtrl"}).when("/serial",{templateUrl:"/app/content/content.html",controller:"SerialContentCtrl"})}function t(e){"ngInject";e.content=[{type:"film",id:1,name:"Batman v Superman: Dawn of Justice",poster:"http://www.kinopoisk.ru/images/film_big/770631.jpg"},{type:"serial",id:1,name:"The flash",poster:"http://www.kinopoisk.ru/images/film_big/817506.jpg"},{type:"film",id:1,name:"The Justice League Part One",poster:"http://www.kinopoisk.ru/images/film_big/424994.jpg"},{type:"film",id:1,name:"Untitled Spider-Man Reboot",poster:"http://www.kinopoisk.ru/images/film_big/690593.jpg"},{type:"film",id:1,name:"Frozen",poster:"http://www.kinopoisk.ru/images/film_big/493208.jpg"}]}function n(e){"ngInject";e.content=[{type:"film",id:1,name:"Frozen",poster:"http://www.kinopoisk.ru/images/film_big/493208.jpg"},{type:"film",id:1,name:"Batman v Superman: Dawn of Justice",poster:"http://www.kinopoisk.ru/images/film_big/770631.jpg"},{type:"serial",id:1,name:"The flash",poster:"http://www.kinopoisk.ru/images/film_big/817506.jpg"},{type:"film",id:1,name:"The Justice League Part One",poster:"http://www.kinopoisk.ru/images/film_big/424994.jpg"},{type:"film",id:1,name:"Untitled Spider-Man Reboot",poster:"http://www.kinopoisk.ru/images/film_big/690593.jpg"},{type:"film",id:1,name:"Frozen",poster:"http://www.kinopoisk.ru/images/film_big/493208.jpg"},{type:"film",id:1,name:"Frozen",poster:"http://www.kinopoisk.ru/images/film_big/493208.jpg"},{type:"film",id:1,name:"Frozen",poster:"http://www.kinopoisk.ru/images/film_big/493208.jpg"},{type:"film",id:1,name:"Frozen",poster:"http://www.kinopoisk.ru/images/film_big/493208.jpg"},{type:"film",id:1,name:"Frozen",poster:"http://www.kinopoisk.ru/images/film_big/493208.jpg"},{type:"film",id:1,name:"Frozen",poster:"http://www.kinopoisk.ru/images/film_big/493208.jpg"},{type:"film",id:1,name:"Frozen",poster:"http://www.kinopoisk.ru/images/film_big/493208.jpg"}]}function i(e){"ngInject";e.content=[{type:"film",id:1,name:"Frozen",poster:"http://www.kinopoisk.ru/images/film_big/493208.jpg"},{type:"film",id:1,name:"Frozen",poster:"http://www.kinopoisk.ru/images/film_big/493208.jpg"},{type:"film",id:1,name:"Frozen",poster:"http://www.kinopoisk.ru/images/film_big/493208.jpg"},{type:"film",id:1,name:"Frozen",poster:"http://www.kinopoisk.ru/images/film_big/493208.jpg"}]}e.$inject=["$routeProvider"],t.$inject=["$scope"],i.$inject=["$scope"],n.$inject=["$scope"],angular.module("ContentModule",["ContentServices"]).config(e).controller("AllContentCtrl",t).controller("SerialContentCtrl",i).controller("FilmContentCtrl",n)}(),function(){function e(){}angular.module("ContentServices",[]).service("ContentService",e)}(),function(){function e(e){"ngInject";e.when("/film/:content_id",{templateUrl:"/app/content-card/content-card.html",controller:"FilmCardCtrl"}).when("/serial/:content_id",{templateUrl:"/app/content-card/content-card.html",controller:"SerialCardCtrl"})}function t(){"ngInject"}function n(){"ngInject"}e.$inject=["$routeProvider"],angular.module("ContentCardModule",[]),angular.module("ContentCardModule").config(e).controller("FilmCardCtrl",t).controller("SerialCardCtrl",n)}(),function(){function e(e){"ngInject";function t(t,n,i){n.on("click",function(n){console.log("/"+t.item.type+"/"+t.item.id),e.path("/"+t.item.type+"/"+t.item.id),t.$apply()})}return{link:t,restrict:"E",replace:!0,scope:{item:"="},templateUrl:"/app/item/item.html"}}angular.module("ItemModule",[]).directive("contentItem",e),e.$inject=["$location"]}(),function(){"use strict";function e(e){"ngInject";e.content=[{name:"Frozen",poster:"http://www.kinopoisk.ru/images/film_big/493208.jpg"},{name:"Batman v Superman: Dawn of Justice",poster:"http://www.kinopoisk.ru/images/film_big/770631.jpg"},{name:"The flash",poster:"http://www.kinopoisk.ru/images/film_big/817506.jpg"},{name:"The Justice League Part One",poster:"http://www.kinopoisk.ru/images/film_big/424994.jpg"},{name:"Batman v Superman: Dawn of Justice",poster:"http://www.kinopoisk.ru/images/film_big/770631.jpg"},{name:"Untitled Spider-Man Reboot",poster:"http://www.kinopoisk.ru/images/film_big/690593.jpg"}]}angular.module("RecentModule",[]).controller("RecentCtrl",e),e.$inject=["$scope"],angular.module("RecentModule").directive("owlCarousel",function(){var e=function(e,t,n){var i=function(){t.owlCarousel({items:6,itemsDesktop:[1300,5]})};e.$watchCollection(n.owlCarousel,function(){i()})};return{restrict:"A",link:e}})}(),function(){"use strict";function e(e){"ngInject";e.when("/upload",{templateUrl:"/app/upload/upload.html",controller:"UploadCtrl"})}function t(e,t){"ngInject";e.content=[{type:"film",name:"Frozen",poster:"http://www.kinopoisk.ru/images/film_big/493208.jpg"},{type:"film",name:"Batman v Superman: Dawn of Justice",poster:"http://www.kinopoisk.ru/images/film_big/770631.jpg"},{type:"serial",name:"The flash",poster:"http://www.kinopoisk.ru/images/film_big/817506.jpg"},{type:"film",name:"The Justice League Part One",poster:"http://www.kinopoisk.ru/images/film_big/424994.jpg"},{type:"film",name:"Untitled Spider-Man Reboot",poster:"http://www.kinopoisk.ru/images/film_big/690593.jpg"},{type:"film",name:"Frozen",poster:"http://www.kinopoisk.ru/images/film_big/493208.jpg"}],angular.forEach(e.content,function(e){t.save(e)})}function n(e){"ngInject";var t=e("/rest/content",{},{});return t}e.$inject=["$routeProvider"],angular.module("UploadModule",["ngResource"]),angular.module("UploadModule").config(e),angular.module("UploadModule").controller("UploadCtrl",t),angular.module("UploadModule").service("ContentService",n),t.$inject=["$scope","ContentService"],n.$inject=["$resource"]}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkFwcE1vZHVsZS5qcyIsImFsbC5taW4uanMiLCJjb250ZW50L0NvbnRlbnRNb2R1bGUuanMiLCJjb250ZW50L0NvbnRlbnRTZXJ2aWNlcy5qcyIsImNvbnRlbnQtY2FyZC9Db250ZW50Q2FyZE1vZHVsZS5qcyIsIml0ZW0vSXRlbU1vZHVsZS5qcyIsInJlY2VudC9SZWNlbnRNb2R1bGUuanMiLCJ1cGxvYWQvVXBsb2FkTW9kdWxlLmpzIl0sIm5hbWVzIjpbIk1vbml0b3JDb25maWciLCIkcm9vdFNjb3BlIiwiYWN0aXZlVGFiIiwiJG9uIiwiZXZlbnQiLCJuZXh0IiwiJCRyb3V0ZSIsIm9yaWdpbmFsUGF0aCIsIlJvdXRlQ29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCIkbG9jYXRpb25Qcm92aWRlciIsIm90aGVyd2lzZSIsInJlZGlyZWN0VG8iLCJodG1sNU1vZGUiLCJOYXZpZ2F0aW9uQ3RybCIsIiRzY29wZSIsInNlbGVjdFRhYiIsInRhYiIsInNlbGVjdGVkVGFiIiwiaW5kaWNhdG9yIiwiJCIsImluZGV4IiwidGFicyIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJjc3MiLCJsZWZ0IiwicmlnaHQiLCJjdXJyZW50IiwidG90YWxXaWR0aCIsIndpZHRoIiwiZWFjaCIsImVsIiwib3V0ZXJXaWR0aCIsImxhc3RUYWIiLCJpbmRleE9mIiwiaWQiLCJUYWIiLCJuYW1lIiwic2VsZWN0ZWQiLCJ0aGlzIiwiJGluamVjdCIsImFuZ3VsYXIiLCJtb2R1bGUiLCJjb25maWciLCJydW4iLCJjb250cm9sbGVyIiwicHJvdG90eXBlIiwiZGlyZWN0aXZlIiwic2NvcGUiLCJlbGVtZW50IiwiYXR0cnMiLCJ1cmwiLCJiYWNrZ3JvdW5kIiwiYmFja2dyb3VuZC1pbWFnZSIsImJhY2tncm91bmQtc2l6ZSIsIndoZW4iLCJ0ZW1wbGF0ZVVybCIsIkFsbENvbnRlbnRDdHJsIiwiY29udGVudCIsInR5cGUiLCJwb3N0ZXIiLCJGaWxtQ29udGVudEN0cmwiLCJTZXJpYWxDb250ZW50Q3RybCIsIkNvbnRlbnRTZXJ2aWNlIiwic2VydmljZSIsIkZpbG1DYXJkQ3RybCIsIlNlcmlhbENhcmRDdHJsIiwiY29udGVudEl0ZW0iLCIkbG9jYXRpb24iLCJsaW5rZXIiLCJhdHRyIiwib24iLCJjb25zb2xlIiwibG9nIiwiaXRlbSIsInBhdGgiLCIkYXBwbHkiLCJsaW5rIiwicmVzdHJpY3QiLCJyZXBsYWNlIiwiUmVjZW50Q3RybCIsImxvYWRDYXJvdXNlbCIsIm93bENhcm91c2VsIiwiaXRlbXMiLCJpdGVtc0Rlc2t0b3AiLCIkd2F0Y2hDb2xsZWN0aW9uIiwiVXBsb2FkQ3RybCIsImZvckVhY2giLCJzYXZlIiwiJHJlc291cmNlIiwiQ29udGVudFJlc291cmNlIl0sIm1hcHBpbmdzIjoiQ0FHQSxXQUNBLFlBaUJBLFNBQUFBLEdBQUFDLEdBQ0EsVUFDQUEsR0FBQUMsVUFBQSxJQUNBRCxFQUFBRSxJQUFBLG9CQUFBLFNBQUFDLEVBQUFDLEdBRUFBLEVBQUFDLFVBQ0FMLEVBQUFDLFVBQUFHLEVBQUFDLFFBQUFDLGdCQUtBLFFBQUFDLEdBQUFDLEVBQUFDLEdBQ0EsVUFDQUQsR0FBQUUsV0FDQUMsV0FBQSxNQUVBRixFQUFBRyxXQUFBLEdBR0EsUUFBQUMsR0FBQUMsR0FDQSxVQWdDQSxTQUFBQyxHQUFBQyxHQUNBLEdBQUFDLEdBQ0FDLEVBQUFDLEVBQUEsbUJBQ0FDLEVBQUFELEVBQUEsZ0JBQUFDLE9BRUFILEdBQUFILEVBQUFPLEtBQUFMLEVBQUFJLE9BQ0FBLEVBQUFKLEVBQUFJLE9BQ0FGLEVBQUFJLFlBQUEsU0FDQUosRUFBQUssU0FBQSxRQUNBTCxFQUFBTSxLQUFBQyxLQUFBUixFQUFBUSxPQUNBUCxFQUFBTSxLQUFBRSxNQUFBVCxFQUFBUyxVQUVBUixFQUFBSSxZQUFBLFFBQ0FKLEVBQUFLLFNBQUEsU0FDQUwsRUFBQU0sS0FBQUUsTUFBQVQsRUFBQVMsUUFDQVIsRUFBQU0sS0FBQUMsS0FBQVIsRUFBQVEsUUE3Q0FYLEVBQUFaLElBQUEsb0JBQUEsU0FBQUMsRUFB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LE9BQUEsdURBQ0FELEtBQUEsT0FBQXRCLEtBQUEscUNBQUF1QixPQUFBLHVEQUNBRCxLQUFBLFNBQUF0QixLQUFBLFlBQUF1QixPQUFBLHVEQUNBRCxLQUFBLE9BQUF0QixLQUFBLDhCQUFBdUIsT0FBQSx1REFDQUQsS0FBQSxPQUFBdEIsS0FBQSw2QkFBQXVCLE9BQUEsdURBQ0FELEtBQUEsT0FBQXRCLEtBQUEsU0FBQXVCLE9BQUEsdURBR0FuQixRQUFBOEMsUUFBQXpFLEVBQUE0QyxRQUFBLFNBQUFBLEdBQ0FLLEVBQUF5QixLQUFBOUIsS0FLQSxRQUFBSyxHQUFBMEIsR0FDQSxVQUNBLElBQUFDLEdBQUFELEVBQUEsc0JBQ0EsT0FBQUMsR04yUkluRixFQUFZaUMsU0FBVyxrQk05VDNCQyxRQUFBQyxPQUFBLGdCQUFBLGVBQ0FELFFBQUFDLE9BQUEsZ0JBQUFDLE9BQUFwQyxHQUNBa0MsUUFBQUMsT0FBQSxnQkFBQUcsV0FBQSxhQUFBeUMsR0FDQTdDLFFBQUFDLE9BQUEsZ0JBQUFzQixRQUFBLGlCQUFBRCxHQVdBdUIsRUFBQTlDLFNBQUEsU0FBQSxrQkFpQkF1QixFQUFBdkIsU0FBQSIsImZpbGUiOiJhbGwubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgQnJhaWRuZXIgb24gMzAvMDEvMjAxNi5cclxuICovXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ0FwcCcsIFtcclxuICAgICAgICAnbmdSb3V0ZScsXHJcbiAgICAgICAgJ25nQW5pbWF0ZScsXHJcblxyXG4gICAgICAgIC8vTW9kdWxlc1xyXG4gICAgICAgICdDb250ZW50TW9kdWxlJyxcclxuICAgICAgICAnQ29udGVudENhcmRNb2R1bGUnLFxyXG4gICAgICAgICdJdGVtTW9kdWxlJyxcclxuICAgICAgICAnVXBsb2FkTW9kdWxlJyxcclxuICAgICAgICAnUmVjZW50TW9kdWxlJ1xyXG4gICAgXSlcclxuICAgICAgICAuY29uZmlnKFJvdXRlQ29uZmlnKVxyXG4gICAgICAgIC5ydW4oTW9uaXRvckNvbmZpZylcclxuICAgICAgICAuY29udHJvbGxlcihcIk5hdmlnYXRpb25DdHJsXCIsIE5hdmlnYXRpb25DdHJsKTtcclxuXHJcbiAgICBmdW5jdGlvbiBNb25pdG9yQ29uZmlnKCRyb290U2NvcGUpIHtcclxuICAgICAgICBcIm5nSW5qZWN0XCI7XHJcbiAgICAgICAgJHJvb3RTY29wZS5hY3RpdmVUYWIgPSBcIi9cIjtcclxuICAgICAgICAkcm9vdFNjb3BlLiRvbignJHJvdXRlQ2hhbmdlU3RhcnQnLCBmdW5jdGlvbiAoZXZlbnQsIG5leHQpIHtcclxuICAgICAgICAgICAgLy9UT0RPIGFkZCBtb25pdG9yaW5nXHJcbiAgICAgICAgICAgIGlmIChuZXh0LiQkcm91dGUpIHtcclxuICAgICAgICAgICAgICAgICRyb290U2NvcGUuYWN0aXZlVGFiID0gbmV4dC4kJHJvdXRlLm9yaWdpbmFsUGF0aDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBmdW5jdGlvbiBSb3V0ZUNvbmZpZygkcm91dGVQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIpIHtcclxuICAgICAgICBcIm5nSW5qZWN0XCI7XHJcbiAgICAgICAgJHJvdXRlUHJvdmlkZXIub3RoZXJ3aXNlKHtcclxuICAgICAgICAgICAgcmVkaXJlY3RUbzogJy8nXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIE5hdmlnYXRpb25DdHJsICgkc2NvcGUpIHtcclxuICAgICAgICBcIm5nSW5qZWN0XCI7XHJcblxyXG4gICAgICAgICRzY29wZS4kb24oJyRyb3V0ZUNoYW5nZVN0YXJ0JywgZnVuY3Rpb24gKGV2ZW50LCBjdXJyZW50KSB7XHJcbiAgICAgICAgICAgIHZhciB0b3RhbFdpZHRoID0gJCgnbWVudSB1bCcpLndpZHRoKCk7XHJcbiAgICAgICAgICAgICQoXCJtZW51IHVsIGxpXCIpLmVhY2goZnVuY3Rpb24gKGluZGV4LCBlbCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHdpZHRoID0gJChlbCkub3V0ZXJXaWR0aCgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHRhYiA9ICRzY29wZS50YWJzW2luZGV4XTtcclxuICAgICAgICAgICAgICAgIHRhYi5pbmRleCA9IGluZGV4O1xyXG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFiLmxlZnQgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIHRhYi5yaWdodCA9IHRvdGFsV2lkdGggLSB3aWR0aDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxhc3RUYWIgPSAkc2NvcGUudGFic1tpbmRleCAtIDFdO1xyXG4gICAgICAgICAgICAgICAgICAgIHRhYi5sZWZ0ID0gdG90YWxXaWR0aCAtIGxhc3RUYWIucmlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFiLnJpZ2h0ID0gbGFzdFRhYi5yaWdodCAtIHdpZHRoO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5hY3RpdmVUYWIuaW5kZXhPZih0YWIuaWQpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RUYWIodGFiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICRzY29wZS50YWJzID0gW1xyXG4gICAgICAgICAgICBuZXcgVGFiKFwiL1wiLCBcItCS0YHQtVwiKSxcclxuICAgICAgICAgICAgbmV3IFRhYihcIi9maWxtXCIsIFwi0KTQuNC70YzQvNGLXCIpLFxyXG4gICAgICAgICAgICBuZXcgVGFiKFwiL3NlcmlhbFwiLCBcItCh0LXRgNC40LDQu9GLXCIpLFxyXG4gICAgICAgICAgICBuZXcgVGFiKFwiL2FuaW1lXCIsIFwi0JDQvdC40LzQtVwiKSxcclxuICAgICAgICAgICAgbmV3IFRhYihcIi9vdGhlclwiLCBcItCf0YDQvtGH0LXQtVwiKVxyXG4gICAgICAgIF07XHJcbiAgICAgICAgXHJcbiAgICAgICAgJHNjb3BlLnNlbGVjdFRhYiA9IHNlbGVjdFRhYjtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc2VsZWN0VGFiKHRhYikge1xyXG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRUYWI7XHJcbiAgICAgICAgICAgIHZhciBpbmRpY2F0b3IgPSAkKCcubWVudS1pbmRpY2F0b3InKTtcclxuICAgICAgICAgICAgdmFyIGluZGV4ID0gJCgnLmFjdGl2ZS1tZW51JykuaW5kZXgoKTtcclxuXHJcbiAgICAgICAgICAgIHNlbGVjdGVkVGFiID0gJHNjb3BlLnRhYnNbdGFiLmluZGV4XTtcclxuICAgICAgICAgICAgaWYgKGluZGV4ID4gdGFiLmluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICBpbmRpY2F0b3IucmVtb3ZlQ2xhc3MoXCJyaWdodFwiKTtcclxuICAgICAgICAgICAgICAgIGluZGljYXRvci5hZGRDbGFzcyhcImxlZnRcIik7XHJcbiAgICAgICAgICAgICAgICBpbmRpY2F0b3IuY3NzKHtsZWZ0OiBzZWxlY3RlZFRhYi5sZWZ0fSk7XHJcbiAgICAgICAgICAgICAgICBpbmRpY2F0b3IuY3NzKHtyaWdodDogc2VsZWN0ZWRUYWIucmlnaHR9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGluZGljYXRvci5yZW1vdmVDbGFzcyhcImxlZnRcIik7XHJcbiAgICAgICAgICAgICAgICBpbmRpY2F0b3IuYWRkQ2xhc3MoXCJyaWdodFwiKTtcclxuICAgICAgICAgICAgICAgIGluZGljYXRvci5jc3Moe3JpZ2h0OiBzZWxlY3RlZFRhYi5yaWdodH0pO1xyXG4gICAgICAgICAgICAgICAgaW5kaWNhdG9yLmNzcyh7bGVmdDogc2VsZWN0ZWRUYWIubGVmdH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIFRhYihpZCwgbmFtZSwgc2VsZWN0ZWQpIHtcclxuICAgICAgICB0aGlzLmlkID0gaWQ7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkID0gc2VsZWN0ZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgVGFiLnByb3RvdHlwZSA9IHtcclxuICAgICAgICBpZDogXCJcIixcclxuICAgICAgICBuYW1lOiBcIlwiLFxyXG4gICAgICAgIHNlbGVjdGVkOiBmYWxzZVxyXG4gICAgfTtcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnQXBwJykuZGlyZWN0aXZlKCdiYWNrZ3JvdW5kJywgZnVuY3Rpb24oKXtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzKXtcclxuICAgICAgICAgICAgdmFyIHVybCA9IGF0dHJzLmJhY2tncm91bmQ7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuY3NzKHtcclxuICAgICAgICAgICAgICAgICdiYWNrZ3JvdW5kLWltYWdlJzogJ3VybCgnICsgdXJsICsnKScsXHJcbiAgICAgICAgICAgICAgICAnYmFja2dyb3VuZC1zaXplJyA6ICdjb3ZlcidcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgIH0pO1xyXG5cclxuXHJcblxyXG59KSgpOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEJyYWlkbmVyIG9uIDMwLzAxLzIwMTYuXHJcbiAqL1xyXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIFJvdXRlQ29uZmlnLiRpbmplY3QgPSBbXCIkcm91dGVQcm92aWRlclwiLCBcIiRsb2NhdGlvblByb3ZpZGVyXCJdO1xyXG4gICAgTW9uaXRvckNvbmZpZy4kaW5qZWN0ID0gW1wiJHJvb3RTY29wZVwiXTtcclxuICAgIE5hdmlnYXRpb25DdHJsLiRpbmplY3QgPSBbXCIkc2NvcGVcIl07XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnQXBwJywgW1xyXG4gICAgICAgICduZ1JvdXRlJyxcclxuICAgICAgICAnbmdBbmltYXRlJyxcclxuXHJcbiAgICAgICAgLy9Nb2R1bGVzXHJcbiAgICAgICAgJ0NvbnRlbnRNb2R1bGUnLFxyXG4gICAgICAgICdDb250ZW50Q2FyZE1vZHVsZScsXHJcbiAgICAgICAgJ0l0ZW1Nb2R1bGUnLFxyXG4gICAgICAgICdVcGxvYWRNb2R1bGUnLFxyXG4gICAgICAgICdSZWNlbnRNb2R1bGUnXHJcbiAgICBdKVxyXG4gICAgICAgIC5jb25maWcoUm91dGVDb25maWcpXHJcbiAgICAgICAgLnJ1bihNb25pdG9yQ29uZmlnKVxyXG4gICAgICAgIC5jb250cm9sbGVyKFwiTmF2aWdhdGlvbkN0cmxcIiwgTmF2aWdhdGlvbkN0cmwpO1xyXG5cclxuICAgIGZ1bmN0aW9uIE1vbml0b3JDb25maWcoJHJvb3RTY29wZSkge1xyXG4gICAgICAgIFwibmdJbmplY3RcIjtcclxuICAgICAgICAkcm9vdFNjb3BlLmFjdGl2ZVRhYiA9IFwiL1wiO1xyXG4gICAgICAgICRyb290U2NvcGUuJG9uKCckcm91dGVDaGFuZ2VTdGFydCcsIGZ1bmN0aW9uIChldmVudCwgbmV4dCkge1xyXG4gICAgICAgICAgICAvL1RPRE8gYWRkIG1vbml0b3JpbmdcclxuICAgICAgICAgICAgaWYgKG5leHQuJCRyb3V0ZSkge1xyXG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS5hY3RpdmVUYWIgPSBuZXh0LiQkcm91dGUub3JpZ2luYWxQYXRoO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGZ1bmN0aW9uIFJvdXRlQ29uZmlnKCRyb3V0ZVByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlcikge1xyXG4gICAgICAgIFwibmdJbmplY3RcIjtcclxuICAgICAgICAkcm91dGVQcm92aWRlci5vdGhlcndpc2Uoe1xyXG4gICAgICAgICAgICByZWRpcmVjdFRvOiAnLydcclxuICAgICAgICB9KTtcclxuICAgICAgICAkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gTmF2aWdhdGlvbkN0cmwgKCRzY29wZSkge1xyXG4gICAgICAgIFwibmdJbmplY3RcIjtcclxuXHJcbiAgICAgICAgJHNjb3BlLiRvbignJHJvdXRlQ2hhbmdlU3RhcnQnLCBmdW5jdGlvbiAoZXZlbnQsIGN1cnJlbnQpIHtcclxuICAgICAgICAgICAgdmFyIHRvdGFsV2lkdGggPSAkKCdtZW51IHVsJykud2lkdGgoKTtcclxuICAgICAgICAgICAgJChcIm1lbnUgdWwgbGlcIikuZWFjaChmdW5jdGlvbiAoaW5kZXgsIGVsKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgd2lkdGggPSAkKGVsKS5vdXRlcldpZHRoKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGFiID0gJHNjb3BlLnRhYnNbaW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgdGFiLmluZGV4ID0gaW5kZXg7XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICB0YWIubGVmdCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFiLnJpZ2h0ID0gdG90YWxXaWR0aCAtIHdpZHRoO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbGFzdFRhYiA9ICRzY29wZS50YWJzW2luZGV4IC0gMV07XHJcbiAgICAgICAgICAgICAgICAgICAgdGFiLmxlZnQgPSB0b3RhbFdpZHRoIC0gbGFzdFRhYi5yaWdodDtcclxuICAgICAgICAgICAgICAgICAgICB0YWIucmlnaHQgPSBsYXN0VGFiLnJpZ2h0IC0gd2lkdGg7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmFjdGl2ZVRhYi5pbmRleE9mKHRhYi5pZCkgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdFRhYih0YWIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnRhYnMgPSBbXHJcbiAgICAgICAgICAgIG5ldyBUYWIoXCIvXCIsIFwi0JLRgdC1XCIpLFxyXG4gICAgICAgICAgICBuZXcgVGFiKFwiL2ZpbG1cIiwgXCLQpNC40LvRjNC80YtcIiksXHJcbiAgICAgICAgICAgIG5ldyBUYWIoXCIvc2VyaWFsXCIsIFwi0KHQtdGA0LjQsNC70YtcIiksXHJcbiAgICAgICAgICAgIG5ldyBUYWIoXCIvYW5pbWVcIiwgXCLQkNC90LjQvNC1XCIpLFxyXG4gICAgICAgICAgICBuZXcgVGFiKFwiL290aGVyXCIsIFwi0J/RgNC+0YfQtdC1XCIpXHJcbiAgICAgICAgXTtcclxuICAgICAgICBcclxuICAgICAgICAkc2NvcGUuc2VsZWN0VGFiID0gc2VsZWN0VGFiO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBzZWxlY3RUYWIodGFiKSB7XHJcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZFRhYjtcclxuICAgICAgICAgICAgdmFyIGluZGljYXRvciA9ICQoJy5tZW51LWluZGljYXRvcicpO1xyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSAkKCcuYWN0aXZlLW1lbnUnKS5pbmRleCgpO1xyXG5cclxuICAgICAgICAgICAgc2VsZWN0ZWRUYWIgPSAkc2NvcGUudGFic1t0YWIuaW5kZXhdO1xyXG4gICAgICAgICAgICBpZiAoaW5kZXggPiB0YWIuaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgIGluZGljYXRvci5yZW1vdmVDbGFzcyhcInJpZ2h0XCIpO1xyXG4gICAgICAgICAgICAgICAgaW5kaWNhdG9yLmFkZENsYXNzKFwibGVmdFwiKTtcclxuICAgICAgICAgICAgICAgIGluZGljYXRvci5jc3Moe2xlZnQ6IHNlbGVjdGVkVGFiLmxlZnR9KTtcclxuICAgICAgICAgICAgICAgIGluZGljYXRvci5jc3Moe3JpZ2h0OiBzZWxlY3RlZFRhYi5yaWdodH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaW5kaWNhdG9yLnJlbW92ZUNsYXNzKFwibGVmdFwiKTtcclxuICAgICAgICAgICAgICAgIGluZGljYXRvci5hZGRDbGFzcyhcInJpZ2h0XCIpO1xyXG4gICAgICAgICAgICAgICAgaW5kaWNhdG9yLmNzcyh7cmlnaHQ6IHNlbGVjdGVkVGFiLnJpZ2h0fSk7XHJcbiAgICAgICAgICAgICAgICBpbmRpY2F0b3IuY3NzKHtsZWZ0OiBzZWxlY3RlZFRhYi5sZWZ0fSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gVGFiKGlkLCBuYW1lLCBzZWxlY3RlZCkge1xyXG4gICAgICAgIHRoaXMuaWQgPSBpZDtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWQgPSBzZWxlY3RlZDtcclxuICAgIH1cclxuXHJcbiAgICBUYWIucHJvdG90eXBlID0ge1xyXG4gICAgICAgIGlkOiBcIlwiLFxyXG4gICAgICAgIG5hbWU6IFwiXCIsXHJcbiAgICAgICAgc2VsZWN0ZWQ6IGZhbHNlXHJcbiAgICB9O1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdBcHAnKS5kaXJlY3RpdmUoJ2JhY2tncm91bmQnLCBmdW5jdGlvbigpe1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMpe1xyXG4gICAgICAgICAgICB2YXIgdXJsID0gYXR0cnMuYmFja2dyb3VuZDtcclxuICAgICAgICAgICAgZWxlbWVudC5jc3Moe1xyXG4gICAgICAgICAgICAgICAgJ2JhY2tncm91bmQtaW1hZ2UnOiAndXJsKCcgKyB1cmwgKycpJyxcclxuICAgICAgICAgICAgICAgICdiYWNrZ3JvdW5kLXNpemUnIDogJ2NvdmVyJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgfSk7XHJcblxyXG5cclxuXHJcbn0pKCk7XG4vKipcclxuICogQ3JlYXRlZCBieSBnb29kbCBvbiAzLzkvMjAxNi5cclxuICovXHJcblxyXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgUm91dGVDb25maWcuJGluamVjdCA9IFtcIiRyb3V0ZVByb3ZpZGVyXCJdO1xyXG4gICAgQWxsQ29udGVudEN0cmwuJGluamVjdCA9IFtcIiRzY29wZVwiXTtcclxuICAgIFNlcmlhbENvbnRlbnRDdHJsLiRpbmplY3QgPSBbXCIkc2NvcGVcIl07XHJcbiAgICBGaWxtQ29udGVudEN0cmwuJGluamVjdCA9IFtcIiRzY29wZVwiXTtcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdDb250ZW50TW9kdWxlJywgWydDb250ZW50U2VydmljZXMnXSlcclxuICAgICAgICAuY29uZmlnKFJvdXRlQ29uZmlnKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdBbGxDb250ZW50Q3RybCcsIEFsbENvbnRlbnRDdHJsKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdTZXJpYWxDb250ZW50Q3RybCcsIFNlcmlhbENvbnRlbnRDdHJsKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdGaWxtQ29udGVudEN0cmwnLCBGaWxtQ29udGVudEN0cmwpO1xyXG5cclxuICAgIGZ1bmN0aW9uIFJvdXRlQ29uZmlnKCRyb3V0ZVByb3ZpZGVyKSB7XHJcbiAgICAgICAgXCJuZ0luamVjdFwiO1xyXG4gICAgICAgICRyb3V0ZVByb3ZpZGVyLndoZW4oJy8nLCB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL2FwcC9jb250ZW50L2NvbnRlbnQuaHRtbCcsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdBbGxDb250ZW50Q3RybCdcclxuICAgICAgICB9KS53aGVuKCcvZmlsbScsIHtcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvYXBwL2NvbnRlbnQvY29udGVudC5odG1sJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogJ0ZpbG1Db250ZW50Q3RybCdcclxuICAgICAgICB9KS53aGVuKCcvc2VyaWFsJywge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9hcHAvY29udGVudC9jb250ZW50Lmh0bWwnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnU2VyaWFsQ29udGVudEN0cmwnXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gQWxsQ29udGVudEN0cmwoJHNjb3BlKSB7XHJcbiAgICAgICAgXCJuZ0luamVjdFwiO1xyXG4gICAgICAgICRzY29wZS5jb250ZW50ID0gW1xyXG4gICAgICAgICAgICAvLyB7dHlwZTogJ2ZpbG0nLCBpZDogMSwgbmFtZTogJ0Zyb3plbicsIHBvc3RlcjogJ2h0dHA6Ly93d3cua2lub3BvaXNrLnJ1L2ltYWdlcy9maWxtX2JpZy80OTMyMDguanBnJ30sXHJcbiAgICAgICAgICAgIHt0eXBlOiAnZmlsbScsIGlkOiAxLCBuYW1lOiAnQmF0bWFuIHYgU3VwZXJtYW46IERhd24gb2YgSnVzdGljZScsIHBvc3RlcjogJ2h0dHA6Ly93d3cua2lub3BvaXNrLnJ1L2ltYWdlcy9maWxtX2JpZy83NzA2MzEuanBnJ30sXHJcbiAgICAgICAgICAgIHt0eXBlOiAnc2VyaWFsJywgaWQ6IDEsIG5hbWU6ICdUaGUgZmxhc2gnLCBwb3N0ZXI6ICdodHRwOi8vd3d3Lmtpbm9wb2lzay5ydS9pbWFnZXMvZmlsbV9iaWcvODE3NTA2LmpwZyd9LFxyXG4gICAgICAgICAgICB7dHlwZTogJ2ZpbG0nLCBpZDogMSwgbmFtZTogJ1RoZSBKdXN0aWNlIExlYWd1ZSBQYXJ0IE9uZScsIHBvc3RlcjogJ2h0dHA6Ly93d3cua2lub3BvaXNrLnJ1L2ltYWdlcy9maWxtX2JpZy80MjQ5OTQuanBnJ30sXHJcbiAgICAgICAgICAgIHt0eXBlOiAnZmlsbScsIGlkOiAxLCBuYW1lOiAnVW50aXRsZWQgU3BpZGVyLU1hbiBSZWJvb3QnLCBwb3N0ZXI6ICdodHRwOi8vd3d3Lmtpbm9wb2lzay5ydS9pbWFnZXMvZmlsbV9iaWcvNjkwNTkzLmpwZyd9LFxyXG4gICAgICAgICAgICAvLyB7dHlwZTogJ2ZpbG0nLCBpZDogMSwgbmFtZTogJ0Zyb3plbicsIHBvc3RlcjogJ2h0dHA6Ly93d3cua2lub3BvaXNrLnJ1L2ltYWdlcy9maWxtX2JpZy80OTMyMDguanBnJ30sXHJcbiAgICAgICAgICAgIC8vIHt0eXBlOiAnZmlsbScsIGlkOiAxLCBuYW1lOiAnRnJvemVuJywgcG9zdGVyOiAnaHR0cDovL3d3dy5raW5vcG9pc2sucnUvaW1hZ2VzL2ZpbG1fYmlnLzQ5MzIwOC5qcGcnfSxcclxuICAgICAgICAgICAgLy8ge3R5cGU6ICdmaWxtJywgaWQ6IDEsIG5hbWU6ICdGcm96ZW4nLCBwb3N0ZXI6ICdodHRwOi8vd3d3Lmtpbm9wb2lzay5ydS9pbWFnZXMvZmlsbV9iaWcvNDkzMjA4LmpwZyd9LFxyXG4gICAgICAgICAgICAvLyB7dHlwZTogJ2ZpbG0nLCBpZDogMSwgbmFtZTogJ0Zyb3plbicsIHBvc3RlcjogJ2h0dHA6Ly93d3cua2lub3BvaXNrLnJ1L2ltYWdlcy9maWxtX2JpZy80OTMyMDguanBnJ30sXHJcbiAgICAgICAgICAgIC8vIHt0eXBlOiAnZmlsbScsIGlkOiAxLCBuYW1lOiAnRnJvemVuJywgcG9zdGVyOiAnaHR0cDovL3d3dy5raW5vcG9pc2sucnUvaW1hZ2VzL2ZpbG1fYmlnLzQ5MzIwOC5qcGcnfSxcclxuICAgICAgICAgICAgLy8ge3R5cGU6ICdmaWxtJywgaWQ6IDEsIG5hbWU6ICdGcm96ZW4nLCBwb3N0ZXI6ICdodHRwOi8vd3d3Lmtpbm9wb2lzay5ydS9pbWFnZXMvZmlsbV9iaWcvNDkzMjA4LmpwZyd9LFxyXG4gICAgICAgICAgICB7dHlwZTogJ2ZpbG0nLCBpZDogMSwgbmFtZTogJ0Zyb3plbicsIHBvc3RlcjogJ2h0dHA6Ly93d3cua2lub3BvaXNrLnJ1L2ltYWdlcy9maWxtX2JpZy80OTMyMDguanBnJ31cclxuICAgICAgICBdO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIEZpbG1Db250ZW50Q3RybCgkc2NvcGUpIHtcclxuICAgICAgICBcIm5nSW5qZWN0XCI7XHJcbiAgICAgICAgJHNjb3BlLmNvbnRlbnQgPSBbXHJcbiAgICAgICAgICAgIHt0eXBlOiAnZmlsbScsIGlkOiAxLCBuYW1lOiAnRnJvemVuJywgcG9zdGVyOiAnaHR0cDovL3d3dy5raW5vcG9pc2sucnUvaW1hZ2VzL2ZpbG1fYmlnLzQ5MzIwOC5qcGcnfSxcclxuICAgICAgICAgICAge3R5cGU6ICdmaWxtJywgaWQ6IDEsIG5hbWU6ICdCYXRtYW4gdiBTdXBlcm1hbjogRGF3biBvZiBKdXN0aWNlJywgcG9zdGVyOiAnaHR0cDovL3d3dy5raW5vcG9pc2sucnUvaW1hZ2VzL2ZpbG1fYmlnLzc3MDYzMS5qcGcnfSxcclxuICAgICAgICAgICAge3R5cGU6ICdzZXJpYWwnLCBpZDogMSwgbmFtZTogJ1RoZSBmbGFzaCcsIHBvc3RlcjogJ2h0dHA6Ly93d3cua2lub3BvaXNrLnJ1L2ltYWdlcy9maWxtX2JpZy84MTc1MDYuanBnJ30sXHJcbiAgICAgICAgICAgIHt0eXBlOiAnZmlsbScsIGlkOiAxLCBuYW1lOiAnVGhlIEp1c3RpY2UgTGVhZ3VlIFBhcnQgT25lJywgcG9zdGVyOiAnaHR0cDovL3d3dy5raW5vcG9pc2sucnUvaW1hZ2VzL2ZpbG1fYmlnLzQyNDk5NC5qcGcnfSxcclxuICAgICAgICAgICAge3R5cGU6ICdmaWxtJywgaWQ6IDEsIG5hbWU6ICdVbnRpdGxlZCBTcGlkZXItTWFuIFJlYm9vdCcsIHBvc3RlcjogJ2h0dHA6Ly93d3cua2lub3BvaXNrLnJ1L2ltYWdlcy9maWxtX2JpZy82OTA1OTMuanBnJ30sXHJcbiAgICAgICAgICAgIHt0eXBlOiAnZmlsbScsIGlkOiAxLCBuYW1lOiAnRnJvemVuJywgcG9zdGVyOiAnaHR0cDovL3d3dy5raW5vcG9pc2sucnUvaW1hZ2VzL2ZpbG1fYmlnLzQ5MzIwOC5qcGcnfSxcclxuICAgICAgICAgICAge3R5cGU6ICdmaWxtJywgaWQ6IDEsIG5hbWU6ICdGcm96ZW4nLCBwb3N0ZXI6ICdodHRwOi8vd3d3Lmtpbm9wb2lzay5ydS9pbWFnZXMvZmlsbV9iaWcvNDkzMjA4LmpwZyd9LFxyXG4gICAgICAgICAgICB7dHlwZTogJ2ZpbG0nLCBpZDogMSwgbmFtZTogJ0Zyb3plbicsIHBvc3RlcjogJ2h0dHA6Ly93d3cua2lub3BvaXNrLnJ1L2ltYWdlcy9maWxtX2JpZy80OTMyMDguanBnJ30sXHJcbiAgICAgICAgICAgIHt0eXBlOiAnZmlsbScsIGlkOiAxLCBuYW1lOiAnRnJvemVuJywgcG9zdGVyOiAnaHR0cDovL3d3dy5raW5vcG9pc2sucnUvaW1hZ2VzL2ZpbG1fYmlnLzQ5MzIwOC5qcGcnfSxcclxuICAgICAgICAgICAge3R5cGU6ICdmaWxtJywgaWQ6IDEsIG5hbWU6ICdGcm96ZW4nLCBwb3N0ZXI6ICdodHRwOi8vd3d3Lmtpbm9wb2lzay5ydS9pbWFnZXMvZmlsbV9iaWcvNDkzMjA4LmpwZyd9LFxyXG4gICAgICAgICAgICB7dHlwZTogJ2ZpbG0nLCBpZDogMSwgbmFtZTogJ0Zyb3plbicsIHBvc3RlcjogJ2h0dHA6Ly93d3cua2lub3BvaXNrLnJ1L2ltYWdlcy9maWxtX2JpZy80OTMyMDguanBnJ30sXHJcbiAgICAgICAgICAgIHt0eXBlOiAnZmlsbScsIGlkOiAxLCBuYW1lOiAnRnJvemVuJywgcG9zdGVyOiAnaHR0cDovL3d3dy5raW5vcG9pc2sucnUvaW1hZ2VzL2ZpbG1fYmlnLzQ5MzIwOC5qcGcnfVxyXG4gICAgICAgIF07XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gU2VyaWFsQ29udGVudEN0cmwoJHNjb3BlKSB7XHJcbiAgICAgICAgXCJuZ0luamVjdFwiO1xyXG4gICAgICAgICRzY29wZS5jb250ZW50ID0gW1xyXG4gICAgICAgICAgICAvLyB7dHlwZTogJ2ZpbG0nLCBpZDogMSwgbmFtZTogJ0Zyb3plbicsIHBvc3RlcjogJ2h0dHA6Ly93d3cua2lub3BvaXNrLnJ1L2ltYWdlcy9maWxtX2JpZy80OTMyMDguanBnJ30sXHJcbiAgICAgICAgICAgIC8vIHt0eXBlOiAnZmlsbScsIGlkOiAxLCBuYW1lOiAnQmF0bWFuIHYgU3VwZXJtYW46IERhd24gb2YgSnVzdGljZScsIHBvc3RlcjogJ2h0dHA6Ly93d3cua2lub3BvaXNrLnJ1L2ltYWdlcy9maWxtX2JpZy83NzA2MzEuanBnJ30sXHJcbiAgICAgICAgICAgIC8vIHt0eXBlOiAnc2VyaWFsJywgaWQ6IDEsIG5hbWU6ICdUaGUgZmxhc2gnLCBwb3N0ZXI6ICdodHRwOi8vd3d3Lmtpbm9wb2lzay5ydS9pbWFnZXMvZmlsbV9iaWcvODE3NTA2LmpwZyd9LFxyXG4gICAgICAgICAgICAvLyB7dHlwZTogJ2ZpbG0nLCBpZDogMSwgbmFtZTogJ1RoZSBKdXN0aWNlIExlYWd1ZSBQYXJ0IE9uZScsIHBvc3RlcjogJ2h0dHA6Ly93d3cua2lub3BvaXNrLnJ1L2ltYWdlcy9maWxtX2JpZy80MjQ5OTQuanBnJ30sXHJcbiAgICAgICAgICAgIC8vIHt0eXBlOiAnZmlsbScsIGlkOiAxLCBuYW1lOiAnVW50aXRsZWQgU3BpZGVyLU1hbiBSZWJvb3QnLCBwb3N0ZXI6ICdodHRwOi8vd3d3Lmtpbm9wb2lzay5ydS9pbWFnZXMvZmlsbV9iaWcvNjkwNTkzLmpwZyd9LFxyXG4gICAgICAgICAgICAvLyB7dHlwZTogJ2ZpbG0nLCBpZDogMSwgbmFtZTogJ0Zyb3plbicsIHBvc3RlcjogJ2h0dHA6Ly93d3cua2lub3BvaXNrLnJ1L2ltYWdlcy9maWxtX2JpZy80OTMyMDguanBnJ30sXHJcbiAgICAgICAgICAgIC8vIHt0eXBlOiAnZmlsbScsIGlkOiAxLCBuYW1lOiAnRnJvemVuJywgcG9zdGVyOiAnaHR0cDovL3d3dy5raW5vcG9pc2sucnUvaW1hZ2VzL2ZpbG1fYmlnLzQ5MzIwOC5qcGcnfSxcclxuICAgICAgICAgICAgLy8ge3R5cGU6ICdmaWxtJywgaWQ6IDEsIG5hbWU6ICdGcm96ZW4nLCBwb3N0ZXI6ICdodHRwOi8vd3d3Lmtpbm9wb2lzay5ydS9pbWFnZXMvZmlsbV9iaWcvNDkzMjA4LmpwZyd9LFxyXG4gICAgICAgICAgICB7dHlwZTogJ2ZpbG0nLCBpZDogMSwgbmFtZTogJ0Zyb3plbicsIHBvc3RlcjogJ2h0dHA6Ly93d3cua2lub3BvaXNrLnJ1L2ltYWdlcy9maWxtX2JpZy80OTMyMDguanBnJ30sXHJcbiAgICAgICAgICAgIHt0eXBlOiAnZmlsbScsIGlkOiAxLCBuYW1lOiAnRnJvemVuJywgcG9zdGVyOiAnaHR0cDovL3d3dy5raW5vcG9pc2sucnUvaW1hZ2VzL2ZpbG1fYmlnLzQ5MzIwOC5qcGcnfSxcclxuICAgICAgICAgICAge3R5cGU6ICdmaWxtJywgaWQ6IDEsIG5hbWU6ICdGcm96ZW4nLCBwb3N0ZXI6ICdodHRwOi8vd3d3Lmtpbm9wb2lzay5ydS9pbWFnZXMvZmlsbV9iaWcvNDkzMjA4LmpwZyd9LFxyXG4gICAgICAgICAgICB7dHlwZTogJ2ZpbG0nLCBpZDogMSwgbmFtZTogJ0Zyb3plbicsIHBvc3RlcjogJ2h0dHA6Ly93d3cua2lub3BvaXNrLnJ1L2ltYWdlcy9maWxtX2JpZy80OTMyMDguanBnJ31cclxuICAgICAgICBdO1xyXG4gICAgfVxyXG59KSgpO1xuLyoqXHJcbiAqIENyZWF0ZWQgYnkgZ29vZGwgb24gMy85LzIwMTYuXHJcbiAqL1xyXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ0NvbnRlbnRTZXJ2aWNlcycsIFtdKS5zZXJ2aWNlKCdDb250ZW50U2VydmljZScsIENvbnRlbnRTZXJ2aWNlKTtcclxuXHJcbiAgICBmdW5jdGlvbiBDb250ZW50U2VydmljZSgpIHtcclxuXHJcbiAgICB9XHJcbn0pKCk7XHJcblxuLyoqXHJcbiAqIENyZWF0ZWQgYnkgZ29vZGwgb24gMy8xMy8yMDE2LlxyXG4gKi9cclxuKGZ1bmN0aW9uICgpIHtcclxuICAgIFJvdXRlQ29uZmlnLiRpbmplY3QgPSBbXCIkcm91dGVQcm92aWRlclwiXTtcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdDb250ZW50Q2FyZE1vZHVsZScsIFtdKTtcclxuICAgIFxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ0NvbnRlbnRDYXJkTW9kdWxlJylcclxuICAgICAgICAuY29uZmlnKFJvdXRlQ29uZmlnKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdGaWxtQ2FyZEN0cmwnLCBGaWxtQ2FyZEN0cmwpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ1NlcmlhbENhcmRDdHJsJywgU2VyaWFsQ2FyZEN0cmwpO1xyXG5cclxuICAgIGZ1bmN0aW9uIFJvdXRlQ29uZmlnKCRyb3V0ZVByb3ZpZGVyKSB7XHJcbiAgICAgICAgXCJuZ0luamVjdFwiO1xyXG4gICAgICAgICRyb3V0ZVByb3ZpZGVyLndoZW4oJy9maWxtLzpjb250ZW50X2lkJywge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9hcHAvY29udGVudC1jYXJkL2NvbnRlbnQtY2FyZC5odG1sJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogJ0ZpbG1DYXJkQ3RybCdcclxuICAgICAgICB9KS53aGVuKCcvc2VyaWFsLzpjb250ZW50X2lkJywge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9hcHAvY29udGVudC1jYXJkL2NvbnRlbnQtY2FyZC5odG1sJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogJ1NlcmlhbENhcmRDdHJsJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIEZpbG1DYXJkQ3RybCgpIHtcclxuICAgICAgICBcIm5nSW5qZWN0XCI7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gU2VyaWFsQ2FyZEN0cmwoKSB7XHJcbiAgICAgICAgXCJuZ0luamVjdFwiO1xyXG4gICAgfVxyXG4gICAgXHJcbn0pKCk7XG4vKipcclxuICogQ3JlYXRlZCBieSBnb29kbCBvbiAzLzkvMjAxNi5cclxuICovXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnSXRlbU1vZHVsZScsIFtdKVxyXG4gICAgICAgIC5kaXJlY3RpdmUoJ2NvbnRlbnRJdGVtJywgY29udGVudEl0ZW0pO1xyXG5cclxuICAgIGNvbnRlbnRJdGVtLiRpbmplY3QgPSBbJyRsb2NhdGlvbiddO1xyXG4gICAgZnVuY3Rpb24gY29udGVudEl0ZW0oJGxvY2F0aW9uKSB7XHJcbiAgICAgICAgXCJuZ0luamVjdFwiO1xyXG4gICAgICAgIGZ1bmN0aW9uIGxpbmtlcihzY29wZSwgZWxlbWVudCwgYXR0cikge1xyXG4gICAgICAgICAgICBlbGVtZW50Lm9uKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCIvXCIgKyBzY29wZS5pdGVtLnR5cGUgK1wiL1wiICsgc2NvcGUuaXRlbS5pZCk7XHJcbiAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aChcIi9cIiArIHNjb3BlLml0ZW0udHlwZSArXCIvXCIgKyBzY29wZS5pdGVtLmlkKTtcclxuICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbGluazogbGlua2VyLFxyXG4gICAgICAgICAgICByZXN0cmljdDogJ0UnLFxyXG4gICAgICAgICAgICByZXBsYWNlOiB0cnVlLFxyXG4gICAgICAgICAgICBzY29wZToge1xyXG4gICAgICAgICAgICAgICAgaXRlbTogJz0nXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL2FwcC9pdGVtL2l0ZW0uaHRtbCdcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59KSgpO1xuLyoqXHJcbiAgICAqIENyZWF0ZWQgYnkgQnJhaWRuZXJcclxuICAgICovXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ1JlY2VudE1vZHVsZScsIFtdKVxyXG4gICAgICAgIC5jb250cm9sbGVyKFwiUmVjZW50Q3RybFwiLCBSZWNlbnRDdHJsKTtcclxuXHJcbiAgICBSZWNlbnRDdHJsLiRpbmplY3QgPSBbJyRzY29wZSddO1xyXG4gICAgZnVuY3Rpb24gUmVjZW50Q3RybCgkc2NvcGUpIHtcclxuICAgICAgICBcIm5nSW5qZWN0XCI7XHJcbiAgICAgICAgJHNjb3BlLmNvbnRlbnQgPSBbXHJcbiAgICAgICAgICAgIHtuYW1lOiAnRnJvemVuJywgcG9zdGVyOiAnaHR0cDovL3d3dy5raW5vcG9pc2sucnUvaW1hZ2VzL2ZpbG1fYmlnLzQ5MzIwOC5qcGcnfSxcclxuICAgICAgICAgICAge25hbWU6ICdCYXRtYW4gdiBTdXBlcm1hbjogRGF3biBvZiBKdXN0aWNlJywgcG9zdGVyOiAnaHR0cDovL3d3dy5raW5vcG9pc2sucnUvaW1hZ2VzL2ZpbG1fYmlnLzc3MDYzMS5qcGcnfSxcclxuICAgICAgICAgICAge25hbWU6ICdUaGUgZmxhc2gnLCBwb3N0ZXI6ICdodHRwOi8vd3d3Lmtpbm9wb2lzay5ydS9pbWFnZXMvZmlsbV9iaWcvODE3NTA2LmpwZyd9LFxyXG4gICAgICAgICAgICB7bmFtZTogJ1RoZSBKdXN0aWNlIExlYWd1ZSBQYXJ0IE9uZScsIHBvc3RlcjogJ2h0dHA6Ly93d3cua2lub3BvaXNrLnJ1L2ltYWdlcy9maWxtX2JpZy80MjQ5OTQuanBnJ30sXHJcbiAgICAgICAgICAgIHtuYW1lOiAnQmF0bWFuIHYgU3VwZXJtYW46IERhd24gb2YgSnVzdGljZScsIHBvc3RlcjogJ2h0dHA6Ly93d3cua2lub3BvaXNrLnJ1L2ltYWdlcy9maWxtX2JpZy83NzA2MzEuanBnJ30sXHJcbiAgICAgICAgICAgIHtuYW1lOiAnVW50aXRsZWQgU3BpZGVyLU1hbiBSZWJvb3QnLCBwb3N0ZXI6ICdodHRwOi8vd3d3Lmtpbm9wb2lzay5ydS9pbWFnZXMvZmlsbV9iaWcvNjkwNTkzLmpwZyd9XHJcbiAgICAgICAgXTtcclxuICAgIH1cclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnUmVjZW50TW9kdWxlJykuZGlyZWN0aXZlKCdvd2xDYXJvdXNlbCcsIGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICB2YXIgbGlua2VyID0gZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB2YXIgbG9hZENhcm91c2VsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5vd2xDYXJvdXNlbCh7aXRlbXM6IDYsIGl0ZW1zRGVza3RvcDogWzEzMDAsIDVdfSk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBzY29wZS4kd2F0Y2hDb2xsZWN0aW9uKGF0dHIub3dsQ2Fyb3VzZWwsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGxvYWRDYXJvdXNlbCgpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmVzdHJpY3Q6IFwiQVwiLFxyXG4gICAgICAgICAgICBsaW5rOiBsaW5rZXJcclxuICAgICAgICB9O1xyXG5cclxuICAgIH0pO1xyXG59KSgpO1xuLyoqXHJcbiAqIENyZWF0ZWQgYnkgQnJhaWRuZXIgb24gMDYvMDMvMjAxNi5cclxuICovXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgUm91dGVDb25maWcuJGluamVjdCA9IFtcIiRyb3V0ZVByb3ZpZGVyXCJdO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ1VwbG9hZE1vZHVsZScsIFsnbmdSZXNvdXJjZSddKTtcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdVcGxvYWRNb2R1bGUnKS5jb25maWcoUm91dGVDb25maWcpO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ1VwbG9hZE1vZHVsZScpLmNvbnRyb2xsZXIoJ1VwbG9hZEN0cmwnLCBVcGxvYWRDdHJsKTtcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdVcGxvYWRNb2R1bGUnKS5zZXJ2aWNlKCdDb250ZW50U2VydmljZScsIENvbnRlbnRTZXJ2aWNlKTtcclxuXHJcbiAgICBmdW5jdGlvbiBSb3V0ZUNvbmZpZygkcm91dGVQcm92aWRlcikge1xyXG4gICAgICAgIFwibmdJbmplY3RcIjtcclxuICAgICAgICAkcm91dGVQcm92aWRlci53aGVuKCcvdXBsb2FkJywge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9hcHAvdXBsb2FkL3VwbG9hZC5odG1sJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogJ1VwbG9hZEN0cmwnXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuXHJcbiAgICBVcGxvYWRDdHJsLiRpbmplY3QgPSBbJyRzY29wZScsICdDb250ZW50U2VydmljZSddO1xyXG4gICAgZnVuY3Rpb24gVXBsb2FkQ3RybCgkc2NvcGUsIENvbnRlbnRTZXJ2aWNlKSB7XHJcbiAgICAgICAgXCJuZ0luamVjdFwiO1xyXG4gICAgICAgICRzY29wZS5jb250ZW50ID0gW1xyXG4gICAgICAgICAgICB7dHlwZTogJ2ZpbG0nLCAgbmFtZTogJ0Zyb3plbicsIHBvc3RlcjogJ2h0dHA6Ly93d3cua2lub3BvaXNrLnJ1L2ltYWdlcy9maWxtX2JpZy80OTMyMDguanBnJ30sXHJcbiAgICAgICAgICAgIHt0eXBlOiAnZmlsbScsICBuYW1lOiAnQmF0bWFuIHYgU3VwZXJtYW46IERhd24gb2YgSnVzdGljZScsIHBvc3RlcjogJ2h0dHA6Ly93d3cua2lub3BvaXNrLnJ1L2ltYWdlcy9maWxtX2JpZy83NzA2MzEuanBnJ30sXHJcbiAgICAgICAgICAgIHt0eXBlOiAnc2VyaWFsJywgbmFtZTogJ1RoZSBmbGFzaCcsIHBvc3RlcjogJ2h0dHA6Ly93d3cua2lub3BvaXNrLnJ1L2ltYWdlcy9maWxtX2JpZy84MTc1MDYuanBnJ30sXHJcbiAgICAgICAgICAgIHt0eXBlOiAnZmlsbScsICBuYW1lOiAnVGhlIEp1c3RpY2UgTGVhZ3VlIFBhcnQgT25lJywgcG9zdGVyOiAnaHR0cDovL3d3dy5raW5vcG9pc2sucnUvaW1hZ2VzL2ZpbG1fYmlnLzQyNDk5NC5qcGcnfSxcclxuICAgICAgICAgICAge3R5cGU6ICdmaWxtJywgIG5hbWU6ICdVbnRpdGxlZCBTcGlkZXItTWFuIFJlYm9vdCcsIHBvc3RlcjogJ2h0dHA6Ly93d3cua2lub3BvaXNrLnJ1L2ltYWdlcy9maWxtX2JpZy82OTA1OTMuanBnJ30sXHJcbiAgICAgICAgICAgIHt0eXBlOiAnZmlsbScsICBuYW1lOiAnRnJvemVuJywgcG9zdGVyOiAnaHR0cDovL3d3dy5raW5vcG9pc2sucnUvaW1hZ2VzL2ZpbG1fYmlnLzQ5MzIwOC5qcGcnfVxyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIGFuZ3VsYXIuZm9yRWFjaCgkc2NvcGUuY29udGVudCwgZnVuY3Rpb24gKGNvbnRlbnQpIHtcclxuICAgICAgICAgICAgQ29udGVudFNlcnZpY2Uuc2F2ZShjb250ZW50KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBDb250ZW50U2VydmljZS4kaW5qZWN0ID0gWyckcmVzb3VyY2UnXTtcclxuICAgIGZ1bmN0aW9uIENvbnRlbnRTZXJ2aWNlKCRyZXNvdXJjZSkge1xyXG4gICAgICAgIFwibmdJbmplY3RcIjtcclxuICAgICAgICB2YXIgQ29udGVudFJlc291cmNlID0gJHJlc291cmNlKCcvcmVzdC9jb250ZW50Jywge30sIHt9KTtcclxuICAgICAgICByZXR1cm4gQ29udGVudFJlc291cmNlO1xyXG4gICAgICAgIFxyXG4gICAgfVxyXG59KSgpOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGdvb2RsIG9uIDMvOS8yMDE2LlxyXG4gKi9cclxuXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnQ29udGVudE1vZHVsZScsIFsnQ29udGVudFNlcnZpY2VzJ10pXHJcbiAgICAgICAgLmNvbmZpZyhSb3V0ZUNvbmZpZylcclxuICAgICAgICAuY29udHJvbGxlcignQWxsQ29udGVudEN0cmwnLCBBbGxDb250ZW50Q3RybClcclxuICAgICAgICAuY29udHJvbGxlcignU2VyaWFsQ29udGVudEN0cmwnLCBTZXJpYWxDb250ZW50Q3RybClcclxuICAgICAgICAuY29udHJvbGxlcignRmlsbUNvbnRlbnRDdHJsJywgRmlsbUNvbnRlbnRDdHJsKTtcclxuXHJcbiAgICBmdW5jdGlvbiBSb3V0ZUNvbmZpZygkcm91dGVQcm92aWRlcikge1xyXG4gICAgICAgIFwibmdJbmplY3RcIjtcclxuICAgICAgICAkcm91dGVQcm92aWRlci53aGVuKCcvJywge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9hcHAvY29udGVudC9jb250ZW50Lmh0bWwnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnQWxsQ29udGVudEN0cmwnXHJcbiAgICAgICAgfSkud2hlbignL2ZpbG0nLCB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL2FwcC9jb250ZW50L2NvbnRlbnQuaHRtbCcsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdGaWxtQ29udGVudEN0cmwnXHJcbiAgICAgICAgfSkud2hlbignL3NlcmlhbCcsIHtcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvYXBwL2NvbnRlbnQvY29udGVudC5odG1sJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogJ1NlcmlhbENvbnRlbnRDdHJsJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIEFsbENvbnRlbnRDdHJsKCRzY29wZSkge1xyXG4gICAgICAgIFwibmdJbmplY3RcIjtcclxuICAgICAgICAkc2NvcGUuY29udGVudCA9IFtcclxuICAgICAgICAgICAgLy8ge3R5cGU6ICdmaWxtJywgaWQ6IDEsIG5hbWU6ICdGcm96ZW4nLCBwb3N0ZXI6ICdodHRwOi8vd3d3Lmtpbm9wb2lzay5ydS9pbWFnZXMvZmlsbV9iaWcvNDkzMjA4LmpwZyd9LFxyXG4gICAgICAgICAgICB7dHlwZTogJ2ZpbG0nLCBpZDogMSwgbmFtZTogJ0JhdG1hbiB2IFN1cGVybWFuOiBEYXduIG9mIEp1c3RpY2UnLCBwb3N0ZXI6ICdodHRwOi8vd3d3Lmtpbm9wb2lzay5ydS9pbWFnZXMvZmlsbV9iaWcvNzcwNjMxLmpwZyd9LFxyXG4gICAgICAgICAgICB7dHlwZTogJ3NlcmlhbCcsIGlkOiAxLCBuYW1lOiAnVGhlIGZsYXNoJywgcG9zdGVyOiAnaHR0cDovL3d3dy5raW5vcG9pc2sucnUvaW1hZ2VzL2ZpbG1fYmlnLzgxNzUwNi5qcGcnfSxcclxuICAgICAgICAgICAge3R5cGU6ICdmaWxtJywgaWQ6IDEsIG5hbWU6ICdUaGUgSnVzdGljZSBMZWFndWUgUGFydCBPbmUnLCBwb3N0ZXI6ICdodHRwOi8vd3d3Lmtpbm9wb2lzay5ydS9pbWFnZXMvZmlsbV9iaWcvNDI0OTk0LmpwZyd9LFxyXG4gICAgICAgICAgICB7dHlwZTogJ2ZpbG0nLCBpZDogMSwgbmFtZTogJ1VudGl0bGVkIFNwaWRlci1NYW4gUmVib290JywgcG9zdGVyOiAnaHR0cDovL3d3dy5raW5vcG9pc2sucnUvaW1hZ2VzL2ZpbG1fYmlnLzY5MDU5My5qcGcnfSxcclxuICAgICAgICAgICAgLy8ge3R5cGU6ICdmaWxtJywgaWQ6IDEsIG5hbWU6ICdGcm96ZW4nLCBwb3N0ZXI6ICdodHRwOi8vd3d3Lmtpbm9wb2lzay5ydS9pbWFnZXMvZmlsbV9iaWcvNDkzMjA4LmpwZyd9LFxyXG4gICAgICAgICAgICAvLyB7dHlwZTogJ2ZpbG0nLCBpZDogMSwgbmFtZTogJ0Zyb3plbicsIHBvc3RlcjogJ2h0dHA6Ly93d3cua2lub3BvaXNrLnJ1L2ltYWdlcy9maWxtX2JpZy80OTMyMDguanBnJ30sXHJcbiAgICAgICAgICAgIC8vIHt0eXBlOiAnZmlsbScsIGlkOiAxLCBuYW1lOiAnRnJvemVuJywgcG9zdGVyOiAnaHR0cDovL3d3dy5raW5vcG9pc2sucnUvaW1hZ2VzL2ZpbG1fYmlnLzQ5MzIwOC5qcGcnfSxcclxuICAgICAgICAgICAgLy8ge3R5cGU6ICdmaWxtJywgaWQ6IDEsIG5hbWU6ICdGcm96ZW4nLCBwb3N0ZXI6ICdodHRwOi8vd3d3Lmtpbm9wb2lzay5ydS9pbWFnZXMvZmlsbV9iaWcvNDkzMjA4LmpwZyd9LFxyXG4gICAgICAgICAgICAvLyB7dHlwZTogJ2ZpbG0nLCBpZDogMSwgbmFtZTogJ0Zyb3plbicsIHBvc3RlcjogJ2h0dHA6Ly93d3cua2lub3BvaXNrLnJ1L2ltYWdlcy9maWxtX2JpZy80OTMyMDguanBnJ30sXHJcbiAgICAgICAgICAgIC8vIHt0eXBlOiAnZmlsbScsIGlkOiAxLCBuYW1lOiAnRnJvemVuJywgcG9zdGVyOiAnaHR0cDovL3d3dy5raW5vcG9pc2sucnUvaW1hZ2VzL2ZpbG1fYmlnLzQ5MzIwOC5qcGcnfSxcclxuICAgICAgICAgICAge3R5cGU6ICdmaWxtJywgaWQ6IDEsIG5hbWU6ICdGcm96ZW4nLCBwb3N0ZXI6ICdodHRwOi8vd3d3Lmtpbm9wb2lzay5ydS9pbWFnZXMvZmlsbV9iaWcvNDkzMjA4LmpwZyd9XHJcbiAgICAgICAgXTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBGaWxtQ29udGVudEN0cmwoJHNjb3BlKSB7XHJcbiAgICAgICAgXCJuZ0luamVjdFwiO1xyXG4gICAgICAgICRzY29wZS5jb250ZW50ID0gW1xyXG4gICAgICAgICAgICB7dHlwZTogJ2ZpbG0nLCBpZDogMSwgbmFtZTogJ0Zyb3plbicsIHBvc3RlcjogJ2h0dHA6Ly93d3cua2lub3BvaXNrLnJ1L2ltYWdlcy9maWxtX2JpZy80OTMyMDguanBnJ30sXHJcbiAgICAgICAgICAgIHt0eXBlOiAnZmlsbScsIGlkOiAxLCBuYW1lOiAnQmF0bWFuIHYgU3VwZXJtYW46IERhd24gb2YgSnVzdGljZScsIHBvc3RlcjogJ2h0dHA6Ly93d3cua2lub3BvaXNrLnJ1L2ltYWdlcy9maWxtX2JpZy83NzA2MzEuanBnJ30sXHJcbiAgICAgICAgICAgIHt0eXBlOiAnc2VyaWFsJywgaWQ6IDEsIG5hbWU6ICdUaGUgZmxhc2gnLCBwb3N0ZXI6ICdodHRwOi8vd3d3Lmtpbm9wb2lzay5ydS9pbWFnZXMvZmlsbV9iaWcvODE3NTA2LmpwZyd9LFxyXG4gICAgICAgICAgICB7dHlwZTogJ2ZpbG0nLCBpZDogMSwgbmFtZTogJ1RoZSBKdXN0aWNlIExlYWd1ZSBQYXJ0IE9uZScsIHBvc3RlcjogJ2h0dHA6Ly93d3cua2lub3BvaXNrLnJ1L2ltYWdlcy9maWxtX2JpZy80MjQ5OTQuanBnJ30sXHJcbiAgICAgICAgICAgIHt0eXBlOiAnZmlsbScsIGlkOiAxLCBuYW1lOiAnVW50aXRsZWQgU3BpZGVyLU1hbiBSZWJvb3QnLCBwb3N0ZXI6ICdodHRwOi8vd3d3Lmtpbm9wb2lzay5ydS9pbWFnZXMvZmlsbV9iaWcvNjkwNTkzLmpwZyd9LFxyXG4gICAgICAgICAgICB7dHlwZTogJ2ZpbG0nLCBpZDogMSwgbmFtZTogJ0Zyb3plbicsIHBvc3RlcjogJ2h0dHA6Ly93d3cua2lub3BvaXNrLnJ1L2ltYWdlcy9maWxtX2JpZy80OTMyMDguanBnJ30sXHJcbiAgICAgICAgICAgIHt0eXBlOiAnZmlsbScsIGlkOiAxLCBuYW1lOiAnRnJvemVuJywgcG9zdGVyOiAnaHR0cDovL3d3dy5raW5vcG9pc2sucnUvaW1hZ2VzL2ZpbG1fYmlnLzQ5MzIwOC5qcGcnfSxcclxuICAgICAgICAgICAge3R5cGU6ICdmaWxtJywgaWQ6IDEsIG5hbWU6ICdGcm96ZW4nLCBwb3N0ZXI6ICdodHRwOi8vd3d3Lmtpbm9wb2lzay5ydS9pbWFnZXMvZmlsbV9iaWcvNDkzMjA4LmpwZyd9LFxyXG4gICAgICAgICAgICB7dHlwZTogJ2ZpbG0nLCBpZDogMSwgbmFtZTogJ0Zyb3plbicsIHBvc3RlcjogJ2h0dHA6Ly93d3cua2lub3BvaXNrLnJ1L2ltYWdlcy9maWxtX2JpZy80OTMyMDguanBnJ30sXHJcbiAgICAgICAgICAgIHt0eXBlOiAnZmlsbScsIGlkOiAxLCBuYW1lOiAnRnJvemVuJywgcG9zdGVyOiAnaHR0cDovL3d3dy5raW5vcG9pc2sucnUvaW1hZ2VzL2ZpbG1fYmlnLzQ5MzIwOC5qcGcnfSxcclxuICAgICAgICAgICAge3R5cGU6ICdmaWxtJywgaWQ6IDEsIG5hbWU6ICdGcm96ZW4nLCBwb3N0ZXI6ICdodHRwOi8vd3d3Lmtpbm9wb2lzay5ydS9pbWFnZXMvZmlsbV9iaWcvNDkzMjA4LmpwZyd9LFxyXG4gICAgICAgICAgICB7dHlwZTogJ2ZpbG0nLCBpZDogMSwgbmFtZTogJ0Zyb3plbicsIHBvc3RlcjogJ2h0dHA6Ly93d3cua2lub3BvaXNrLnJ1L2ltYWdlcy9maWxtX2JpZy80OTMyMDguanBnJ31cclxuICAgICAgICBdO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIFNlcmlhbENvbnRlbnRDdHJsKCRzY29wZSkge1xyXG4gICAgICAgIFwibmdJbmplY3RcIjtcclxuICAgICAgICAkc2NvcGUuY29udGVudCA9IFtcclxuICAgICAgICAgICAgLy8ge3R5cGU6ICdmaWxtJywgaWQ6IDEsIG5hbWU6ICdGcm96ZW4nLCBwb3N0ZXI6ICdodHRwOi8vd3d3Lmtpbm9wb2lzay5ydS9pbWFnZXMvZmlsbV9iaWcvNDkzMjA4LmpwZyd9LFxyXG4gICAgICAgICAgICAvLyB7dHlwZTogJ2ZpbG0nLCBpZDogMSwgbmFtZTogJ0JhdG1hbiB2IFN1cGVybWFuOiBEYXduIG9mIEp1c3RpY2UnLCBwb3N0ZXI6ICdodHRwOi8vd3d3Lmtpbm9wb2lzay5ydS9pbWFnZXMvZmlsbV9iaWcvNzcwNjMxLmpwZyd9LFxyXG4gICAgICAgICAgICAvLyB7dHlwZTogJ3NlcmlhbCcsIGlkOiAxLCBuYW1lOiAnVGhlIGZsYXNoJywgcG9zdGVyOiAnaHR0cDovL3d3dy5raW5vcG9pc2sucnUvaW1hZ2VzL2ZpbG1fYmlnLzgxNzUwNi5qcGcnfSxcclxuICAgICAgICAgICAgLy8ge3R5cGU6ICdmaWxtJywgaWQ6IDEsIG5hbWU6ICdUaGUgSnVzdGljZSBMZWFndWUgUGFydCBPbmUnLCBwb3N0ZXI6ICdodHRwOi8vd3d3Lmtpbm9wb2lzay5ydS9pbWFnZXMvZmlsbV9iaWcvNDI0OTk0LmpwZyd9LFxyXG4gICAgICAgICAgICAvLyB7dHlwZTogJ2ZpbG0nLCBpZDogMSwgbmFtZTogJ1VudGl0bGVkIFNwaWRlci1NYW4gUmVib290JywgcG9zdGVyOiAnaHR0cDovL3d3dy5raW5vcG9pc2sucnUvaW1hZ2VzL2ZpbG1fYmlnLzY5MDU5My5qcGcnfSxcclxuICAgICAgICAgICAgLy8ge3R5cGU6ICdmaWxtJywgaWQ6IDEsIG5hbWU6ICdGcm96ZW4nLCBwb3N0ZXI6ICdodHRwOi8vd3d3Lmtpbm9wb2lzay5ydS9pbWFnZXMvZmlsbV9iaWcvNDkzMjA4LmpwZyd9LFxyXG4gICAgICAgICAgICAvLyB7dHlwZTogJ2ZpbG0nLCBpZDogMSwgbmFtZTogJ0Zyb3plbicsIHBvc3RlcjogJ2h0dHA6Ly93d3cua2lub3BvaXNrLnJ1L2ltYWdlcy9maWxtX2JpZy80OTMyMDguanBnJ30sXHJcbiAgICAgICAgICAgIC8vIHt0eXBlOiAnZmlsbScsIGlkOiAxLCBuYW1lOiAnRnJvemVuJywgcG9zdGVyOiAnaHR0cDovL3d3dy5raW5vcG9pc2sucnUvaW1hZ2VzL2ZpbG1fYmlnLzQ5MzIwOC5qcGcnfSxcclxuICAgICAgICAgICAge3R5cGU6ICdmaWxtJywgaWQ6IDEsIG5hbWU6ICdGcm96ZW4nLCBwb3N0ZXI6ICdodHRwOi8vd3d3Lmtpbm9wb2lzay5ydS9pbWFnZXMvZmlsbV9iaWcvNDkzMjA4LmpwZyd9LFxyXG4gICAgICAgICAgICB7dHlwZTogJ2ZpbG0nLCBpZDogMSwgbmFtZTogJ0Zyb3plbicsIHBvc3RlcjogJ2h0dHA6Ly93d3cua2lub3BvaXNrLnJ1L2ltYWdlcy9maWxtX2JpZy80OTMyMDguanBnJ30sXHJcbiAgICAgICAgICAgIHt0eXBlOiAnZmlsbScsIGlkOiAxLCBuYW1lOiAnRnJvemVuJywgcG9zdGVyOiAnaHR0cDovL3d3dy5raW5vcG9pc2sucnUvaW1hZ2VzL2ZpbG1fYmlnLzQ5MzIwOC5qcGcnfSxcclxuICAgICAgICAgICAge3R5cGU6ICdmaWxtJywgaWQ6IDEsIG5hbWU6ICdGcm96ZW4nLCBwb3N0ZXI6ICdodHRwOi8vd3d3Lmtpbm9wb2lzay5ydS9pbWFnZXMvZmlsbV9iaWcvNDkzMjA4LmpwZyd9XHJcbiAgICAgICAgXTtcclxuICAgIH1cclxufSkoKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBnb29kbCBvbiAzLzkvMjAxNi5cclxuICovXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnQ29udGVudFNlcnZpY2VzJywgW10pLnNlcnZpY2UoJ0NvbnRlbnRTZXJ2aWNlJywgQ29udGVudFNlcnZpY2UpO1xyXG5cclxuICAgIGZ1bmN0aW9uIENvbnRlbnRTZXJ2aWNlKCkge1xyXG5cclxuICAgIH1cclxufSkoKTtcclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgZ29vZGwgb24gMy8xMy8yMDE2LlxyXG4gKi9cclxuKGZ1bmN0aW9uICgpIHtcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdDb250ZW50Q2FyZE1vZHVsZScsIFtdKTtcclxuICAgIFxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ0NvbnRlbnRDYXJkTW9kdWxlJylcclxuICAgICAgICAuY29uZmlnKFJvdXRlQ29uZmlnKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdGaWxtQ2FyZEN0cmwnLCBGaWxtQ2FyZEN0cmwpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ1NlcmlhbENhcmRDdHJsJywgU2VyaWFsQ2FyZEN0cmwpO1xyXG5cclxuICAgIGZ1bmN0aW9uIFJvdXRlQ29uZmlnKCRyb3V0ZVByb3ZpZGVyKSB7XHJcbiAgICAgICAgXCJuZ0luamVjdFwiO1xyXG4gICAgICAgICRyb3V0ZVByb3ZpZGVyLndoZW4oJy9maWxtLzpjb250ZW50X2lkJywge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9hcHAvY29udGVudC1jYXJkL2NvbnRlbnQtY2FyZC5odG1sJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogJ0ZpbG1DYXJkQ3RybCdcclxuICAgICAgICB9KS53aGVuKCcvc2VyaWFsLzpjb250ZW50X2lkJywge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9hcHAvY29udGVudC1jYXJkL2NvbnRlbnQtY2FyZC5odG1sJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogJ1NlcmlhbENhcmRDdHJsJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIEZpbG1DYXJkQ3RybCgpIHtcclxuICAgICAgICBcIm5nSW5qZWN0XCI7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gU2VyaWFsQ2FyZEN0cmwoKSB7XHJcbiAgICAgICAgXCJuZ0luamVjdFwiO1xyXG4gICAgfVxyXG4gICAgXHJcbn0pKCk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgZ29vZGwgb24gMy85LzIwMTYuXHJcbiAqL1xyXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ0l0ZW1Nb2R1bGUnLCBbXSlcclxuICAgICAgICAuZGlyZWN0aXZlKCdjb250ZW50SXRlbScsIGNvbnRlbnRJdGVtKTtcclxuXHJcbiAgICBjb250ZW50SXRlbS4kaW5qZWN0ID0gWyckbG9jYXRpb24nXTtcclxuICAgIGZ1bmN0aW9uIGNvbnRlbnRJdGVtKCRsb2NhdGlvbikge1xyXG4gICAgICAgIFwibmdJbmplY3RcIjtcclxuICAgICAgICBmdW5jdGlvbiBsaW5rZXIoc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcclxuICAgICAgICAgICAgZWxlbWVudC5vbignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiL1wiICsgc2NvcGUuaXRlbS50eXBlICtcIi9cIiArIHNjb3BlLml0ZW0uaWQpO1xyXG4gICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoXCIvXCIgKyBzY29wZS5pdGVtLnR5cGUgK1wiL1wiICsgc2NvcGUuaXRlbS5pZCk7XHJcbiAgICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGxpbms6IGxpbmtlcixcclxuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcclxuICAgICAgICAgICAgcmVwbGFjZTogdHJ1ZSxcclxuICAgICAgICAgICAgc2NvcGU6IHtcclxuICAgICAgICAgICAgICAgIGl0ZW06ICc9J1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9hcHAvaXRlbS9pdGVtLmh0bWwnXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufSkoKTsiLCIvKipcclxuICAgICogQ3JlYXRlZCBieSBCcmFpZG5lclxyXG4gICAgKi9cclxuKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnUmVjZW50TW9kdWxlJywgW10pXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoXCJSZWNlbnRDdHJsXCIsIFJlY2VudEN0cmwpO1xyXG5cclxuICAgIFJlY2VudEN0cmwuJGluamVjdCA9IFsnJHNjb3BlJ107XHJcbiAgICBmdW5jdGlvbiBSZWNlbnRDdHJsKCRzY29wZSkge1xyXG4gICAgICAgIFwibmdJbmplY3RcIjtcclxuICAgICAgICAkc2NvcGUuY29udGVudCA9IFtcclxuICAgICAgICAgICAge25hbWU6ICdGcm96ZW4nLCBwb3N0ZXI6ICdodHRwOi8vd3d3Lmtpbm9wb2lzay5ydS9pbWFnZXMvZmlsbV9iaWcvNDkzMjA4LmpwZyd9LFxyXG4gICAgICAgICAgICB7bmFtZTogJ0JhdG1hbiB2IFN1cGVybWFuOiBEYXduIG9mIEp1c3RpY2UnLCBwb3N0ZXI6ICdodHRwOi8vd3d3Lmtpbm9wb2lzay5ydS9pbWFnZXMvZmlsbV9iaWcvNzcwNjMxLmpwZyd9LFxyXG4gICAgICAgICAgICB7bmFtZTogJ1RoZSBmbGFzaCcsIHBvc3RlcjogJ2h0dHA6Ly93d3cua2lub3BvaXNrLnJ1L2ltYWdlcy9maWxtX2JpZy84MTc1MDYuanBnJ30sXHJcbiAgICAgICAgICAgIHtuYW1lOiAnVGhlIEp1c3RpY2UgTGVhZ3VlIFBhcnQgT25lJywgcG9zdGVyOiAnaHR0cDovL3d3dy5raW5vcG9pc2sucnUvaW1hZ2VzL2ZpbG1fYmlnLzQyNDk5NC5qcGcnfSxcclxuICAgICAgICAgICAge25hbWU6ICdCYXRtYW4gdiBTdXBlcm1hbjogRGF3biBvZiBKdXN0aWNlJywgcG9zdGVyOiAnaHR0cDovL3d3dy5raW5vcG9pc2sucnUvaW1hZ2VzL2ZpbG1fYmlnLzc3MDYzMS5qcGcnfSxcclxuICAgICAgICAgICAge25hbWU6ICdVbnRpdGxlZCBTcGlkZXItTWFuIFJlYm9vdCcsIHBvc3RlcjogJ2h0dHA6Ly93d3cua2lub3BvaXNrLnJ1L2ltYWdlcy9maWxtX2JpZy82OTA1OTMuanBnJ31cclxuICAgICAgICBdO1xyXG4gICAgfVxyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdSZWNlbnRNb2R1bGUnKS5kaXJlY3RpdmUoJ293bENhcm91c2VsJywgZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgIHZhciBsaW5rZXIgPSBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHZhciBsb2FkQ2Fyb3VzZWwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50Lm93bENhcm91c2VsKHtpdGVtczogNiwgaXRlbXNEZXNrdG9wOiBbMTMwMCwgNV19KTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHNjb3BlLiR3YXRjaENvbGxlY3Rpb24oYXR0ci5vd2xDYXJvdXNlbCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgbG9hZENhcm91c2VsKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICByZXN0cmljdDogXCJBXCIsXHJcbiAgICAgICAgICAgIGxpbms6IGxpbmtlclxyXG4gICAgICAgIH07XHJcblxyXG4gICAgfSk7XHJcbn0pKCk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgQnJhaWRuZXIgb24gMDYvMDMvMjAxNi5cclxuICovXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ1VwbG9hZE1vZHVsZScsIFsnbmdSZXNvdXJjZSddKTtcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdVcGxvYWRNb2R1bGUnKS5jb25maWcoUm91dGVDb25maWcpO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ1VwbG9hZE1vZHVsZScpLmNvbnRyb2xsZXIoJ1VwbG9hZEN0cmwnLCBVcGxvYWRDdHJsKTtcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdVcGxvYWRNb2R1bGUnKS5zZXJ2aWNlKCdDb250ZW50U2VydmljZScsIENvbnRlbnRTZXJ2aWNlKTtcclxuXHJcbiAgICBmdW5jdGlvbiBSb3V0ZUNvbmZpZygkcm91dGVQcm92aWRlcikge1xyXG4gICAgICAgIFwibmdJbmplY3RcIjtcclxuICAgICAgICAkcm91dGVQcm92aWRlci53aGVuKCcvdXBsb2FkJywge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9hcHAvdXBsb2FkL3VwbG9hZC5odG1sJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogJ1VwbG9hZEN0cmwnXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuXHJcbiAgICBVcGxvYWRDdHJsLiRpbmplY3QgPSBbJyRzY29wZScsICdDb250ZW50U2VydmljZSddO1xyXG4gICAgZnVuY3Rpb24gVXBsb2FkQ3RybCgkc2NvcGUsIENvbnRlbnRTZXJ2aWNlKSB7XHJcbiAgICAgICAgXCJuZ0luamVjdFwiO1xyXG4gICAgICAgICRzY29wZS5jb250ZW50ID0gW1xyXG4gICAgICAgICAgICB7dHlwZTogJ2ZpbG0nLCAgbmFtZTogJ0Zyb3plbicsIHBvc3RlcjogJ2h0dHA6Ly93d3cua2lub3BvaXNrLnJ1L2ltYWdlcy9maWxtX2JpZy80OTMyMDguanBnJ30sXHJcbiAgICAgICAgICAgIHt0eXBlOiAnZmlsbScsICBuYW1lOiAnQmF0bWFuIHYgU3VwZXJtYW46IERhd24gb2YgSnVzdGljZScsIHBvc3RlcjogJ2h0dHA6Ly93d3cua2lub3BvaXNrLnJ1L2ltYWdlcy9maWxtX2JpZy83NzA2MzEuanBnJ30sXHJcbiAgICAgICAgICAgIHt0eXBlOiAnc2VyaWFsJywgbmFtZTogJ1RoZSBmbGFzaCcsIHBvc3RlcjogJ2h0dHA6Ly93d3cua2lub3BvaXNrLnJ1L2ltYWdlcy9maWxtX2JpZy84MTc1MDYuanBnJ30sXHJcbiAgICAgICAgICAgIHt0eXBlOiAnZmlsbScsICBuYW1lOiAnVGhlIEp1c3RpY2UgTGVhZ3VlIFBhcnQgT25lJywgcG9zdGVyOiAnaHR0cDovL3d3dy5raW5vcG9pc2sucnUvaW1hZ2VzL2ZpbG1fYmlnLzQyNDk5NC5qcGcnfSxcclxuICAgICAgICAgICAge3R5cGU6ICdmaWxtJywgIG5hbWU6ICdVbnRpdGxlZCBTcGlkZXItTWFuIFJlYm9vdCcsIHBvc3RlcjogJ2h0dHA6Ly93d3cua2lub3BvaXNrLnJ1L2ltYWdlcy9maWxtX2JpZy82OTA1OTMuanBnJ30sXHJcbiAgICAgICAgICAgIHt0eXBlOiAnZmlsbScsICBuYW1lOiAnRnJvemVuJywgcG9zdGVyOiAnaHR0cDovL3d3dy5raW5vcG9pc2sucnUvaW1hZ2VzL2ZpbG1fYmlnLzQ5MzIwOC5qcGcnfVxyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIGFuZ3VsYXIuZm9yRWFjaCgkc2NvcGUuY29udGVudCwgZnVuY3Rpb24gKGNvbnRlbnQpIHtcclxuICAgICAgICAgICAgQ29udGVudFNlcnZpY2Uuc2F2ZShjb250ZW50KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBDb250ZW50U2VydmljZS4kaW5qZWN0ID0gWyckcmVzb3VyY2UnXTtcclxuICAgIGZ1bmN0aW9uIENvbnRlbnRTZXJ2aWNlKCRyZXNvdXJjZSkge1xyXG4gICAgICAgIFwibmdJbmplY3RcIjtcclxuICAgICAgICB2YXIgQ29udGVudFJlc291cmNlID0gJHJlc291cmNlKCcvcmVzdC9jb250ZW50Jywge30sIHt9KTtcclxuICAgICAgICByZXR1cm4gQ29udGVudFJlc291cmNlO1xyXG4gICAgICAgIFxyXG4gICAgfVxyXG59KSgpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
