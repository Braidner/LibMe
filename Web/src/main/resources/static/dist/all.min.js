function lmInput(){return{scope:{bindModel:"=ngModel"},require:"ngModel",transclude:!0,templateUrl:"/app/controll/input/input-control.html",link:function(e,t,n,o){"use strict"}}}!function(){"use strict";function e(e){"ngInject";e.activeTab="/",e.$on("$routeChangeStart",function(t,n){n.$$route&&(e.activeTab=n.$$route.originalPath)})}function t(e,t){"ngInject";e.otherwise({redirectTo:"/"}),t.html5Mode(!0)}function n(e){"ngInject";function t(t){var n,o=$(".menu-indicator"),i=$("li.active-menu").index();n=e.tabs[t.index],i>t.index?(o.removeClass("right"),o.addClass("left"),o.css({left:n.left}),o.css({right:n.right})):(o.removeClass("left"),o.addClass("right"),o.css({right:n.right}),o.css({left:n.left}))}e.$on("$routeChangeStart",function(n,o){var i=$("menu ul").width();$("menu ul li").each(function(n,o){var r=$(o).outerWidth(),l=e.tabs[n];if(l.index=n,0===n)l.left=0,l.right=i-r;else{var c=e.tabs[n-1];l.left=i-c.right,l.right=c.right-r}e.activeTab.indexOf(l.id)>-1&&t(l)})}),e.tabs=[new o("/","Все"),new o("/film","Фильмы"),new o("/serial","Сериалы"),new o("/anime","Аниме"),new o("/other","Прочее")],e.selectTab=t}function o(e,t,n){this.id=e,this.name=t,this.selected=n}t.$inject=["$routeProvider","$locationProvider"],e.$inject=["$rootScope"],n.$inject=["$scope"],angular.module("App",["ngRoute","ngAnimate","ContentModule","ControlsModule","ContentCardModule","ItemModule","UploadModule","ProfileModule","RecentModule"]).config(t).run(e).controller("NavigationCtrl",n),o.prototype={id:"",name:"",selected:!1},angular.module("App").directive("background",function(){return function(e,t,n){var o=n.background;t.css({"background-image":"url("+o+")","background-size":"cover"})}})}(),function(){function e(e){"ngInject";e.when("/",{templateUrl:"/app/content/content.html",controller:"AllContentCtrl"}).when("/film",{templateUrl:"/app/content/content.html",controller:"FilmContentCtrl"}).when("/serial",{templateUrl:"/app/content/content.html",controller:"SerialContentCtrl"})}function t(e,t){"ngInject";e.content=t.findContent()}function n(e,t){"ngInject";e.content=t.findContent(null,"Film")}function o(e,t){"ngInject";e.content=t.findContent(null,"Serial")}e.$inject=["$routeProvider"],angular.module("ContentModule",["ContentServices"]).config(e).controller("AllContentCtrl",t).controller("SerialContentCtrl",o).controller("FilmContentCtrl",n),t.$inject=["$scope","ContentService"],n.$inject=["$scope","ContentService"],o.$inject=["$scope","ContentService"]}(),function(){"use strict";function e(e){"ngInject";function t(e,t){return i.query({name:e,type:t})}function n(e){var t=new i(e);return t.$save(),t}var o=this,i=e("/rest/content",{},{});return o.findContent=t,o.createContent=n,o}e.$inject=["$resource"],angular.module("ContentServices",["ngResource"]).service("ContentService",e)}(),function(){function e(e){"ngInject";e.when("/film/:content_id",{templateUrl:"/app/content-card/content-card.html",controller:"FilmCardCtrl"}).when("/serial/:content_id",{templateUrl:"/app/content-card/content-card.html",controller:"SerialCardCtrl"})}function t(){"ngInject"}function n(){"ngInject"}e.$inject=["$routeProvider"],angular.module("ContentCardModule",[]),angular.module("ContentCardModule").config(e).controller("FilmCardCtrl",t).controller("SerialCardCtrl",n)}(),function(){"use strict";angular.module("ControlsModule",["control.input-control","control.kinopoisk-control"])}(),function(){function e(e){"ngInject";function t(t,n,o){n.on("click",function(n){e.path("/"+angular.lowercase(t.item.type)+"/"+t.item.id),t.$apply()})}return{link:t,restrict:"E",replace:!0,scope:{item:"="},templateUrl:"/app/item/item.html"}}angular.module("ItemModule",[]).directive("contentItem",e),e.$inject=["$location"]}(),function(){"use strict";function e(e){"ngInject";e.content=[{name:"Frozen",poster:"http://www.kinopoisk.ru/images/film_big/493208.jpg"},{name:"Batman v Superman: Dawn of Justice",poster:"http://www.kinopoisk.ru/images/film_big/770631.jpg"},{name:"The Justice League Part One",poster:"http://www.kinopoisk.ru/images/film_big/424994.jpg"},{name:"The flash",poster:"http://www.kinopoisk.ru/images/film_big/817506.jpg"},{name:"The Justice League Part One",poster:"http://www.kinopoisk.ru/images/film_big/424994.jpg"},{name:"Frozen",poster:"http://www.kinopoisk.ru/images/film_big/493208.jpg"},{name:"Batman v Superman: Dawn of Justice",poster:"http://www.kinopoisk.ru/images/film_big/770631.jpg"},{name:"Untitled Spider-Man Reboot",poster:"http://www.kinopoisk.ru/images/film_big/690593.jpg"}]}angular.module("RecentModule",[]).controller("RecentCtrl",e),e.$inject=["$scope"],angular.module("RecentModule").directive("owlCarousel",function(){var e=function(e,t,n){var o=function(){t.owlCarousel({loop:!1,nav:!1,responsive:{1200:{items:6},992:{items:4},768:{items:3},479:{items:2}}})};e.$watchCollection(n.owlCarousel,function(){o()})};return{restrict:"A",link:e}})}(),function(){"use strict";function e(e){"ngInject";e.when("/profile",{templateUrl:"/app/profile/profile.html",controller:"ProfileCtrl"})}function t(e){function t(e){return profile.perms.indexOf(e)>-1}e.profile={login:"Braidner",perms:["user:edit:profile"]},e.hasPermission=t}function n(e){"ngInject"}e.$inject=["$routeProvider"],t.$inject=["$rootScope"],n.$inject=["$scope"],angular.module("ProfileModule",[]),angular.module("ProfileModule").config(e),angular.module("ProfileModule").run(t),angular.module("ProfileModule").controller("ProfileCtrl",n)}(),function(){"use strict";function e(e){"ngInject";e.when("/upload",{templateUrl:"/app/upload/upload.html",controller:"UploadCtrl"})}function t(e,t){"ngInject";e.content=[{type:"film",name:"Frozen",poster:"http://www.kinopoisk.ru/images/film_big/493208.jpg"},{type:"serial",name:"Batman v Superman: Dawn of Justice",poster:"http://www.kinopoisk.ru/images/film_big/770631.jpg"},{type:"serial",name:"The flash",poster:"http://www.kinopoisk.ru/images/film_big/817506.jpg"},{type:"film",name:"The Justice League Part One",poster:"http://www.kinopoisk.ru/images/film_big/424994.jpg"},{type:"film",name:"Untitled Spider-Man Reboot",poster:"http://www.kinopoisk.ru/images/film_big/690593.jpg"},{type:"serial",name:"Frozen",poster:"http://www.kinopoisk.ru/images/film_big/493208.jpg"}]}function n(e){}e.$inject=["$routeProvider"],n.$inject=["$scope"],angular.module("UploadModule",["ngResource"]),angular.module("UploadModule").config(e),angular.module("UploadModule").controller("UploadCtrl",t),angular.module("UploadModule").controller("FastUploadCtrl",n),t.$inject=["$scope","ContentService"]}(),angular.module("control.input-control",[]).directive("lmInput",lmInput),function(){angular.module("control.kinopoisk-control",[]),angular.module("ControlsModule").directive("lm-kinopoisk",function(){})}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbnRyb2wvaW5wdXQvSW5wdXRDb250cm9sLmpzIiwiQXBwTW9kdWxlLmpzIiwiYWxsLm1pbi5qcyIsImNvbnRlbnQvQ29udGVudE1vZHVsZS5qcyIsImNvbnRlbnQvQ29udGVudFNlcnZpY2VzLmpzIiwiY29udGVudC1jYXJkL0NvbnRlbnRDYXJkTW9kdWxlLmpzIiwiY29udHJvbC9Db250cm9sc01vZHVsZS5qcyIsIml0ZW0vSXRlbU1vZHVsZS5qcyIsInJlY2VudC9SZWNlbnRNb2R1bGUuanMiLCJwcm9maWxlL1Byb2ZpbGVNb2R1bGUuanMiLCJ1cGxvYWQvVXBsb2FkTW9kdWxlLmpzIiwiY29udHJvbC9raW5vcG9pbnNrLWlucHV0L2tpbm9wb2lza0NvbnRyb2wuanMiXSwibmFtZXMiOlsibG1JbnB1dCIsInNjb3BlIiwiYmluZE1vZGVsIiwicmVxdWlyZSIsInRyYW5zY2x1ZGUiLCJ0ZW1wbGF0ZVVybCIsImxpbmsiLCJlbGVtIiwiYXR0ciIsIm5nTW9kZWwiLCJNb25pdG9yQ29uZmlnIiwiJHJvb3RTY29wZSIsImFjdGl2ZVRhYiIsIiRvbiIsImV2ZW50IiwibmV4dCIsIiQkcm91dGUiLCJvcmlnaW5hbFBhdGgiLCJSb3V0ZUNvbmZpZyIsIiRyb3V0ZVByb3ZpZGVyIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCJvdGhlcndpc2UiLCJyZWRpcmVjdFRvIiwiaHRtbDVNb2RlIiwiTmF2aWdhdGlvbkN0cmwiLCIkc2NvcGUiLCJzZWxlY3RUYWIiLCJ0YWIiLCJzZWxlY3RlZFRhYiIsImluZGljYXRvciIsIiQiLCJpbmRleCIsInRhYnMiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwiY3NzIiwibGVmdCIsInJpZ2h0IiwiY3VycmVudCIsInRvdGFsV2lkdGgiLCJ3aWR0aCIsImVhY2giLCJlbCIsIm91dGVyV2lkdGgiLCJsYXN0VGFiIiwiaW5kZXhPZiIsImlkIiwiVGFiIiwibmFtZSIsInNlbGVjdGVkIiwidGhpcyIsIiRpbmplY3QiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwicnVuIiwiY29udHJvbGxlciIsInByb3RvdHlwZSIsImRpcmVjdGl2ZSIsImVsZW1lbnQiLCJhdHRycyIsInVybCIsImJhY2tncm91bmQiLCJiYWNrZ3JvdW5kLWltYWdlIiwiYmFja2dyb3VuZC1zaXplIiwid2hlbiIsIkFsbENvbnRlbnRDdHJsIiwiQ29udGVudFNlcnZpY2UiLCJjb250ZW50IiwiZmluZENvbnRlbnQiLCJGaWxtQ29udGVudEN0cmwiLCJTZXJpYWxDb250ZW50Q3RybCIsIiRyZXNvdXJjZSIsInR5cGUiLCJDb250ZW50IiwicXVlcnkiLCJjcmVhdGVDb250ZW50IiwiY29udGVudERhdGEiLCIkc2F2ZSIsInNlbGYiLCJzZXJ2aWNlIiwiRmlsbUNhcmRDdHJsIiwiU2VyaWFsQ2FyZEN0cmwiLCJjb250ZW50SXRlbSIsIiRsb2NhdGlvbiIsImxpbmtlciIsIm9uIiwicGF0aCIsImxvd2VyY2FzZSIsIml0ZW0iLCIkYXBwbHkiLCJyZXN0cmljdCIsInJlcGxhY2UiLCJSZWNlbnRDdHJsIiwicG9zdGVyIiwibG9hZENhcm91c2VsIiwib3dsQ2Fyb3VzZWwiLCJsb29wIiwibmF2IiwicmVzcG9uc2l2ZSIsMTIwMCwiaXRlbXMiLDk5Miw3NjgsNDc5LCIkd2F0Y2hDb2xsZWN0aW9uIiwiUHJvZmlsZUNvbmZpZyIsImhhc1Blcm1pc3Npb24iLCJwZXJtIiwicHJvZmlsZSIsInBlcm1zIiwibG9naW4iLCJQcm9maWxlQ3RybCIsIlVwbG9hZEN0cmwiLCJGYXN0VXBsb2FkQ3RybCJdLCJtYXBwaW5ncyI6IkFBUUEsUUFBQUEsV0FDQSxPQUNBQyxPQUNBQyxVQUFBLFlBRUFDLFFBQUEsVUFDQUMsWUFBQSxFQUNBQyxZQUFBLHlDQUNBQyxLQUFBLFNBQUFMLEVBQUFNLEVBQUFDLEVBQUFDLEdBQ0EsZ0JDZEEsV0FDQSxZQW1CQSxTQUFBQyxHQUFBQyxHQUNBLFVBQ0FBLEdBQUFDLFVBQUEsSUFDQUQsRUFBQUUsSUFBQSxvQkFBQSxTQUFBQyxFQUFBQyxHQUVBQSxF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bGwubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgZ29vZGwgb24gNC8yLzIwMTYuXHJcbiAqL1xyXG5cclxuXHJcbmFuZ3VsYXIubW9kdWxlKCdjb250cm9sLmlucHV0LWNvbnRyb2wnLCBbXSlcclxuICAgIC5kaXJlY3RpdmUoJ2xtSW5wdXQnLCBsbUlucHV0KTtcclxuXHJcbmZ1bmN0aW9uIGxtSW5wdXQoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHNjb3BlOiB7XHJcbiAgICAgICAgICAgIGJpbmRNb2RlbDonPW5nTW9kZWwnXHJcbiAgICAgICAgfSxcclxuICAgICAgICByZXF1aXJlOiAnbmdNb2RlbCcsXHJcbiAgICAgICAgdHJhbnNjbHVkZTogdHJ1ZSxcclxuICAgICAgICAndGVtcGxhdGVVcmwnOiAnL2FwcC9jb250cm9sbC9pbnB1dC9pbnB1dC1jb250cm9sLmh0bWwnLFxyXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbSwgYXR0ciwgbmdNb2RlbCkge1xyXG4gICAgICAgICAgICBcInVzZSBzdHJpY3RcIjtcclxuICAgICAgICAgICAgLy8gZWxlbS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vICAgICBlbGVtLmFkZENsYXNzKCdsbS1pbnB1dC1mb2N1c2VkJyk7XHJcbiAgICAgICAgICAgIC8vIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn0iLCIvKipcclxuICogQ3JlYXRlZCBieSBCcmFpZG5lciBvbiAzMC8wMS8yMDE2LlxyXG4gKi9cclxuKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnQXBwJywgW1xyXG4gICAgICAgICduZ1JvdXRlJyxcclxuICAgICAgICAnbmdBbmltYXRlJyxcclxuXHJcbiAgICAgICAgLy9Nb2R1bGVzXHJcbiAgICAgICAgJ0NvbnRlbnRNb2R1bGUnLFxyXG4gICAgICAgICdDb250cm9sc01vZHVsZScsXHJcbiAgICAgICAgJ0NvbnRlbnRDYXJkTW9kdWxlJyxcclxuICAgICAgICAnSXRlbU1vZHVsZScsXHJcbiAgICAgICAgJ1VwbG9hZE1vZHVsZScsXHJcbiAgICAgICAgJ1Byb2ZpbGVNb2R1bGUnLFxyXG4gICAgICAgICdSZWNlbnRNb2R1bGUnXHJcbiAgICBdKVxyXG4gICAgICAgIC5jb25maWcoUm91dGVDb25maWcpXHJcbiAgICAgICAgLnJ1bihNb25pdG9yQ29uZmlnKVxyXG4gICAgICAgIC5jb250cm9sbGVyKFwiTmF2aWdhdGlvbkN0cmxcIiwgTmF2aWdhdGlvbkN0cmwpO1xyXG5cclxuICAgIGZ1bmN0aW9uIE1vbml0b3JDb25maWcoJHJvb3RTY29wZSkge1xyXG4gICAgICAgIFwibmdJbmplY3RcIjtcclxuICAgICAgICAkcm9vdFNjb3BlLmFjdGl2ZVRhYiA9IFwiL1wiO1xyXG4gICAgICAgICRyb290U2NvcGUuJG9uKCckcm91dGVDaGFuZ2VTdGFydCcsIGZ1bmN0aW9uIChldmVudCwgbmV4dCkge1xyXG4gICAgICAgICAgICAvL1RPRE8gYWRkIG1vbml0b3JpbmdcclxuICAgICAgICAgICAgaWYgKG5leHQuJCRyb3V0ZSkge1xyXG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS5hY3RpdmVUYWIgPSBuZXh0LiQkcm91dGUub3JpZ2luYWxQYXRoO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGZ1bmN0aW9uIFJvdXRlQ29uZmlnKCRyb3V0ZVByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlcikge1xyXG4gICAgICAgIFwibmdJbmplY3RcIjtcclxuICAgICAgICAkcm91dGVQcm92aWRlci5vdGhlcndpc2Uoe1xyXG4gICAgICAgICAgICByZWRpcmVjdFRvOiAnLydcclxuICAgICAgICB9KTtcclxuICAgICAgICAkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gTmF2aWdhdGlvbkN0cmwgKCRzY29wZSkge1xyXG4gICAgICAgIFwibmdJbmplY3RcIjtcclxuXHJcbiAgICAgICAgJHNjb3BlLiRvbignJHJvdXRlQ2hhbmdlU3RhcnQnLCBmdW5jdGlvbiAoZXZlbnQsIGN1cnJlbnQpIHtcclxuICAgICAgICAgICAgdmFyIHRvdGFsV2lkdGggPSAkKCdtZW51IHVsJykud2lkdGgoKTtcclxuICAgICAgICAgICAgJChcIm1lbnUgdWwgbGlcIikuZWFjaChmdW5jdGlvbiAoaW5kZXgsIGVsKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgd2lkdGggPSAkKGVsKS5vdXRlcldpZHRoKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGFiID0gJHNjb3BlLnRhYnNbaW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgdGFiLmluZGV4ID0gaW5kZXg7XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICB0YWIubGVmdCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFiLnJpZ2h0ID0gdG90YWxXaWR0aCAtIHdpZHRoO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbGFzdFRhYiA9ICRzY29wZS50YWJzW2luZGV4IC0gMV07XHJcbiAgICAgICAgICAgICAgICAgICAgdGFiLmxlZnQgPSB0b3RhbFdpZHRoIC0gbGFzdFRhYi5yaWdodDtcclxuICAgICAgICAgICAgICAgICAgICB0YWIucmlnaHQgPSBsYXN0VGFiLnJpZ2h0IC0gd2lkdGg7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmFjdGl2ZVRhYi5pbmRleE9mKHRhYi5pZCkgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdFRhYih0YWIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnRhYnMgPSBbXHJcbiAgICAgICAgICAgIG5ldyBUYWIoXCIvXCIsIFwi0JLRgdC1XCIpLFxyXG4gICAgICAgICAgICBuZXcgVGFiKFwiL2ZpbG1cIiwgXCLQpNC40LvRjNC80YtcIiksXHJcbiAgICAgICAgICAgIG5ldyBUYWIoXCIvc2VyaWFsXCIsIFwi0KHQtdGA0LjQsNC70YtcIiksXHJcbiAgICAgICAgICAgIG5ldyBUYWIoXCIvYW5pbWVcIiwgXCLQkNC90LjQvNC1XCIpLFxyXG4gICAgICAgICAgICBuZXcgVGFiKFwiL290aGVyXCIsIFwi0J/RgNC+0YfQtdC1XCIpXHJcbiAgICAgICAgXTtcclxuICAgICAgICBcclxuICAgICAgICAkc2NvcGUuc2VsZWN0VGFiID0gc2VsZWN0VGFiO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBzZWxlY3RUYWIodGFiKSB7XHJcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZFRhYjtcclxuICAgICAgICAgICAgdmFyIGluZGljYXRvciA9ICQoJy5tZW51LWluZGljYXRvcicpO1xyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSAkKCdsaS5hY3RpdmUtbWVudScpLmluZGV4KCk7XHJcblxyXG4gICAgICAgICAgICBzZWxlY3RlZFRhYiA9ICRzY29wZS50YWJzW3RhYi5pbmRleF07XHJcbiAgICAgICAgICAgIGlmIChpbmRleCA+IHRhYi5pbmRleCkge1xyXG4gICAgICAgICAgICAgICAgaW5kaWNhdG9yLnJlbW92ZUNsYXNzKFwicmlnaHRcIik7XHJcbiAgICAgICAgICAgICAgICBpbmRpY2F0b3IuYWRkQ2xhc3MoXCJsZWZ0XCIpO1xyXG4gICAgICAgICAgICAgICAgaW5kaWNhdG9yLmNzcyh7bGVmdDogc2VsZWN0ZWRUYWIubGVmdH0pO1xyXG4gICAgICAgICAgICAgICAgaW5kaWNhdG9yLmNzcyh7cmlnaHQ6IHNlbGVjdGVkVGFiLnJpZ2h0fSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpbmRpY2F0b3IucmVtb3ZlQ2xhc3MoXCJsZWZ0XCIpO1xyXG4gICAgICAgICAgICAgICAgaW5kaWNhdG9yLmFkZENsYXNzKFwicmlnaHRcIik7XHJcbiAgICAgICAgICAgICAgICBpbmRpY2F0b3IuY3NzKHtyaWdodDogc2VsZWN0ZWRUYWIucmlnaHR9KTtcclxuICAgICAgICAgICAgICAgIGluZGljYXRvci5jc3Moe2xlZnQ6IHNlbGVjdGVkVGFiLmxlZnR9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBUYWIoaWQsIG5hbWUsIHNlbGVjdGVkKSB7XHJcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZCA9IHNlbGVjdGVkO1xyXG4gICAgfVxyXG5cclxuICAgIFRhYi5wcm90b3R5cGUgPSB7XHJcbiAgICAgICAgaWQ6IFwiXCIsXHJcbiAgICAgICAgbmFtZTogXCJcIixcclxuICAgICAgICBzZWxlY3RlZDogZmFsc2VcclxuICAgIH07XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ0FwcCcpLmRpcmVjdGl2ZSgnYmFja2dyb3VuZCcsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycyl7XHJcbiAgICAgICAgICAgIHZhciB1cmwgPSBhdHRycy5iYWNrZ3JvdW5kO1xyXG4gICAgICAgICAgICBlbGVtZW50LmNzcyh7XHJcbiAgICAgICAgICAgICAgICAnYmFja2dyb3VuZC1pbWFnZSc6ICd1cmwoJyArIHVybCArJyknLFxyXG4gICAgICAgICAgICAgICAgJ2JhY2tncm91bmQtc2l6ZScgOiAnY292ZXInXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICB9KTtcclxuXHJcblxyXG5cclxufSkoKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBCcmFpZG5lciBvbiAzMC8wMS8yMDE2LlxyXG4gKi9cclxuKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBSb3V0ZUNvbmZpZy4kaW5qZWN0ID0gW1wiJHJvdXRlUHJvdmlkZXJcIiwgXCIkbG9jYXRpb25Qcm92aWRlclwiXTtcclxuICAgIE1vbml0b3JDb25maWcuJGluamVjdCA9IFtcIiRyb290U2NvcGVcIl07XHJcbiAgICBOYXZpZ2F0aW9uQ3RybC4kaW5qZWN0ID0gW1wiJHNjb3BlXCJdO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ0FwcCcsIFtcclxuICAgICAgICAnbmdSb3V0ZScsXHJcbiAgICAgICAgJ25nQW5pbWF0ZScsXHJcblxyXG4gICAgICAgIC8vTW9kdWxlc1xyXG4gICAgICAgICdDb250ZW50TW9kdWxlJyxcclxuICAgICAgICAnQ29udHJvbHNNb2R1bGUnLFxyXG4gICAgICAgICdDb250ZW50Q2FyZE1vZHVsZScsXHJcbiAgICAgICAgJ0l0ZW1Nb2R1bGUnLFxyXG4gICAgICAgICdVcGxvYWRNb2R1bGUnLFxyXG4gICAgICAgICdQcm9maWxlTW9kdWxlJyxcclxuICAgICAgICAnUmVjZW50TW9kdWxlJ1xyXG4gICAgXSlcclxuICAgICAgICAuY29uZmlnKFJvdXRlQ29uZmlnKVxyXG4gICAgICAgIC5ydW4oTW9uaXRvckNvbmZpZylcclxuICAgICAgICAuY29udHJvbGxlcihcIk5hdmlnYXRpb25DdHJsXCIsIE5hdmlnYXRpb25DdHJsKTtcclxuXHJcbiAgICBmdW5jdGlvbiBNb25pdG9yQ29uZmlnKCRyb290U2NvcGUpIHtcclxuICAgICAgICBcIm5nSW5qZWN0XCI7XHJcbiAgICAgICAgJHJvb3RTY29wZS5hY3RpdmVUYWIgPSBcIi9cIjtcclxuICAgICAgICAkcm9vdFNjb3BlLiRvbignJHJvdXRlQ2hhbmdlU3RhcnQnLCBmdW5jdGlvbiAoZXZlbnQsIG5leHQpIHtcclxuICAgICAgICAgICAgLy9UT0RPIGFkZCBtb25pdG9yaW5nXHJcbiAgICAgICAgICAgIGlmIChuZXh0LiQkcm91dGUpIHtcclxuICAgICAgICAgICAgICAgICRyb290U2NvcGUuYWN0aXZlVGFiID0gbmV4dC4kJHJvdXRlLm9yaWdpbmFsUGF0aDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBmdW5jdGlvbiBSb3V0ZUNvbmZpZygkcm91dGVQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIpIHtcclxuICAgICAgICBcIm5nSW5qZWN0XCI7XHJcbiAgICAgICAgJHJvdXRlUHJvdmlkZXIub3RoZXJ3aXNlKHtcclxuICAgICAgICAgICAgcmVkaXJlY3RUbzogJy8nXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIE5hdmlnYXRpb25DdHJsICgkc2NvcGUpIHtcclxuICAgICAgICBcIm5nSW5qZWN0XCI7XHJcblxyXG4gICAgICAgICRzY29wZS4kb24oJyRyb3V0ZUNoYW5nZVN0YXJ0JywgZnVuY3Rpb24gKGV2ZW50LCBjdXJyZW50KSB7XHJcbiAgICAgICAgICAgIHZhciB0b3RhbFdpZHRoID0gJCgnbWVudSB1bCcpLndpZHRoKCk7XHJcbiAgICAgICAgICAgICQoXCJtZW51IHVsIGxpXCIpLmVhY2goZnVuY3Rpb24gKGluZGV4LCBlbCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHdpZHRoID0gJChlbCkub3V0ZXJXaWR0aCgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHRhYiA9ICRzY29wZS50YWJzW2luZGV4XTtcclxuICAgICAgICAgICAgICAgIHRhYi5pbmRleCA9IGluZGV4O1xyXG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFiLmxlZnQgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIHRhYi5yaWdodCA9IHRvdGFsV2lkdGggLSB3aWR0aDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxhc3RUYWIgPSAkc2NvcGUudGFic1tpbmRleCAtIDFdO1xyXG4gICAgICAgICAgICAgICAgICAgIHRhYi5sZWZ0ID0gdG90YWxXaWR0aCAtIGxhc3RUYWIucmlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFiLnJpZ2h0ID0gbGFzdFRhYi5yaWdodCAtIHdpZHRoO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5hY3RpdmVUYWIuaW5kZXhPZih0YWIuaWQpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RUYWIodGFiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICRzY29wZS50YWJzID0gW1xyXG4gICAgICAgICAgICBuZXcgVGFiKFwiL1wiLCBcItCS0YHQtVwiKSxcclxuICAgICAgICAgICAgbmV3IFRhYihcIi9maWxtXCIsIFwi0KTQuNC70YzQvNGLXCIpLFxyXG4gICAgICAgICAgICBuZXcgVGFiKFwiL3NlcmlhbFwiLCBcItCh0LXRgNC40LDQu9GLXCIpLFxyXG4gICAgICAgICAgICBuZXcgVGFiKFwiL2FuaW1lXCIsIFwi0JDQvdC40LzQtVwiKSxcclxuICAgICAgICAgICAgbmV3IFRhYihcIi9vdGhlclwiLCBcItCf0YDQvtGH0LXQtVwiKVxyXG4gICAgICAgIF07XHJcbiAgICAgICAgXHJcbiAgICAgICAgJHNjb3BlLnNlbGVjdFRhYiA9IHNlbGVjdFRhYjtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc2VsZWN0VGFiKHRhYikge1xyXG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRUYWI7XHJcbiAgICAgICAgICAgIHZhciBpbmRpY2F0b3IgPSAkKCcubWVudS1pbmRpY2F0b3InKTtcclxuICAgICAgICAgICAgdmFyIGluZGV4ID0gJCgnbGkuYWN0aXZlLW1lbnUnKS5pbmRleCgpO1xyXG5cclxuICAgICAgICAgICAgc2VsZWN0ZWRUYWIgPSAkc2NvcGUudGFic1t0YWIuaW5kZXhdO1xyXG4gICAgICAgICAgICBpZiAoaW5kZXggPiB0YWIuaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgIGluZGljYXRvci5yZW1vdmVDbGFzcyhcInJpZ2h0XCIpO1xyXG4gICAgICAgICAgICAgICAgaW5kaWNhdG9yLmFkZENsYXNzKFwibGVmdFwiKTtcclxuICAgICAgICAgICAgICAgIGluZGljYXRvci5jc3Moe2xlZnQ6IHNlbGVjdGVkVGFiLmxlZnR9KTtcclxuICAgICAgICAgICAgICAgIGluZGljYXRvci5jc3Moe3JpZ2h0OiBzZWxlY3RlZFRhYi5yaWdodH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaW5kaWNhdG9yLnJlbW92ZUNsYXNzKFwibGVmdFwiKTtcclxuICAgICAgICAgICAgICAgIGluZGljYXRvci5hZGRDbGFzcyhcInJpZ2h0XCIpO1xyXG4gICAgICAgICAgICAgICAgaW5kaWNhdG9yLmNzcyh7cmlnaHQ6IHNlbGVjdGVkVGFiLnJpZ2h0fSk7XHJcbiAgICAgICAgICAgICAgICBpbmRpY2F0b3IuY3NzKHtsZWZ0OiBzZWxlY3RlZFRhYi5sZWZ0fSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gVGFiKGlkLCBuYW1lLCBzZWxlY3RlZCkge1xyXG4gICAgICAgIHRoaXMuaWQgPSBpZDtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWQgPSBzZWxlY3RlZDtcclxuICAgIH1cclxuXHJcbiAgICBUYWIucHJvdG90eXBlID0ge1xyXG4gICAgICAgIGlkOiBcIlwiLFxyXG4gICAgICAgIG5hbWU6IFwiXCIsXHJcbiAgICAgICAgc2VsZWN0ZWQ6IGZhbHNlXHJcbiAgICB9O1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdBcHAnKS5kaXJlY3RpdmUoJ2JhY2tncm91bmQnLCBmdW5jdGlvbigpe1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMpe1xyXG4gICAgICAgICAgICB2YXIgdXJsID0gYXR0cnMuYmFja2dyb3VuZDtcclxuICAgICAgICAgICAgZWxlbWVudC5jc3Moe1xyXG4gICAgICAgICAgICAgICAgJ2JhY2tncm91bmQtaW1hZ2UnOiAndXJsKCcgKyB1cmwgKycpJyxcclxuICAgICAgICAgICAgICAgICdiYWNrZ3JvdW5kLXNpemUnIDogJ2NvdmVyJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgfSk7XHJcblxyXG5cclxuXHJcbn0pKCk7XG4vKipcclxuICogQ3JlYXRlZCBieSBnb29kbCBvbiAzLzkvMjAxNi5cclxuICovXHJcblxyXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgUm91dGVDb25maWcuJGluamVjdCA9IFtcIiRyb3V0ZVByb3ZpZGVyXCJdO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ0NvbnRlbnRNb2R1bGUnLCBbJ0NvbnRlbnRTZXJ2aWNlcyddKVxyXG4gICAgICAgIC5jb25maWcoUm91dGVDb25maWcpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0FsbENvbnRlbnRDdHJsJywgQWxsQ29udGVudEN0cmwpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ1NlcmlhbENvbnRlbnRDdHJsJywgU2VyaWFsQ29udGVudEN0cmwpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0ZpbG1Db250ZW50Q3RybCcsIEZpbG1Db250ZW50Q3RybCk7XHJcblxyXG4gICAgZnVuY3Rpb24gUm91dGVDb25maWcoJHJvdXRlUHJvdmlkZXIpIHtcclxuICAgICAgICBcIm5nSW5qZWN0XCI7XHJcbiAgICAgICAgJHJvdXRlUHJvdmlkZXIud2hlbignLycsIHtcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvYXBwL2NvbnRlbnQvY29udGVudC5odG1sJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogJ0FsbENvbnRlbnRDdHJsJ1xyXG4gICAgICAgIH0pLndoZW4oJy9maWxtJywge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9hcHAvY29udGVudC9jb250ZW50Lmh0bWwnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnRmlsbUNvbnRlbnRDdHJsJ1xyXG4gICAgICAgIH0pLndoZW4oJy9zZXJpYWwnLCB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL2FwcC9jb250ZW50L2NvbnRlbnQuaHRtbCcsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdTZXJpYWxDb250ZW50Q3RybCdcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBBbGxDb250ZW50Q3RybC4kaW5qZWN0ID0gWyckc2NvcGUnLCAnQ29udGVudFNlcnZpY2UnXTtcclxuICAgIGZ1bmN0aW9uIEFsbENvbnRlbnRDdHJsKCRzY29wZSwgQ29udGVudFNlcnZpY2UpIHtcclxuICAgICAgICBcIm5nSW5qZWN0XCI7XHJcbiAgICAgICAgJHNjb3BlLmNvbnRlbnQgPSBDb250ZW50U2VydmljZS5maW5kQ29udGVudCgpO1xyXG4gICAgfVxyXG5cclxuICAgIEZpbG1Db250ZW50Q3RybC4kaW5qZWN0ID0gWyckc2NvcGUnLCAnQ29udGVudFNlcnZpY2UnXTtcclxuICAgIGZ1bmN0aW9uIEZpbG1Db250ZW50Q3RybCgkc2NvcGUsIENvbnRlbnRTZXJ2aWNlKSB7XHJcbiAgICAgICAgXCJuZ0luamVjdFwiO1xyXG4gICAgICAgICRzY29wZS5jb250ZW50ID0gQ29udGVudFNlcnZpY2UuZmluZENvbnRlbnQobnVsbCwgJ0ZpbG0nKTtcclxuICAgIH1cclxuXHJcbiAgICBTZXJpYWxDb250ZW50Q3RybC4kaW5qZWN0ID0gWyckc2NvcGUnLCAnQ29udGVudFNlcnZpY2UnXTtcclxuICAgIGZ1bmN0aW9uIFNlcmlhbENvbnRlbnRDdHJsKCRzY29wZSwgQ29udGVudFNlcnZpY2UpIHtcclxuICAgICAgICBcIm5nSW5qZWN0XCI7XHJcbiAgICAgICAgJHNjb3BlLmNvbnRlbnQgPSBDb250ZW50U2VydmljZS5maW5kQ29udGVudChudWxsLCAnU2VyaWFsJyk7XHJcbiAgICB9XHJcbn0pKCk7XG4vKipcclxuICogQ3JlYXRlZCBieSBnb29kbCBvbiAzLzkvMjAxNi5cclxuICovXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuICAgIENvbnRlbnRTZXJ2aWNlLiRpbmplY3QgPSBbXCIkcmVzb3VyY2VcIl07XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnQ29udGVudFNlcnZpY2VzJywgWyduZ1Jlc291cmNlJ10pLnNlcnZpY2UoJ0NvbnRlbnRTZXJ2aWNlJywgQ29udGVudFNlcnZpY2UpO1xyXG5cclxuICAgIGZ1bmN0aW9uIENvbnRlbnRTZXJ2aWNlKCRyZXNvdXJjZSkge1xyXG4gICAgICAgIFwibmdJbmplY3RcIjtcclxuXHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIHZhciBDb250ZW50ID0gJHJlc291cmNlKCcvcmVzdC9jb250ZW50Jywge30sIHt9KTtcclxuICAgICAgICBzZWxmLmZpbmRDb250ZW50ID0gZmluZENvbnRlbnQ7XHJcbiAgICAgICAgc2VsZi5jcmVhdGVDb250ZW50ID0gY3JlYXRlQ29udGVudDtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZmluZENvbnRlbnQobmFtZSwgdHlwZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gQ29udGVudC5xdWVyeSh7bmFtZTogbmFtZSwgdHlwZTogdHlwZX0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlQ29udGVudChjb250ZW50RGF0YSkge1xyXG4gICAgICAgICAgICB2YXIgY29udGVudCA9IG5ldyBDb250ZW50KGNvbnRlbnREYXRhKTtcclxuICAgICAgICAgICAgY29udGVudC4kc2F2ZSgpO1xyXG4gICAgICAgICAgICByZXR1cm4gY29udGVudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHNlbGY7XHJcbiAgICB9XHJcbn0pKCk7XHJcblxuLyoqXHJcbiAqIENyZWF0ZWQgYnkgZ29vZGwgb24gMy8xMy8yMDE2LlxyXG4gKi9cclxuKGZ1bmN0aW9uICgpIHtcclxuICAgIFJvdXRlQ29uZmlnLiRpbmplY3QgPSBbXCIkcm91dGVQcm92aWRlclwiXTtcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdDb250ZW50Q2FyZE1vZHVsZScsIFtdKTtcclxuICAgIFxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ0NvbnRlbnRDYXJkTW9kdWxlJylcclxuICAgICAgICAuY29uZmlnKFJvdXRlQ29uZmlnKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdGaWxtQ2FyZEN0cmwnLCBGaWxtQ2FyZEN0cmwpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ1NlcmlhbENhcmRDdHJsJywgU2VyaWFsQ2FyZEN0cmwpO1xyXG5cclxuICAgIGZ1bmN0aW9uIFJvdXRlQ29uZmlnKCRyb3V0ZVByb3ZpZGVyKSB7XHJcbiAgICAgICAgXCJuZ0luamVjdFwiO1xyXG4gICAgICAgICRyb3V0ZVByb3ZpZGVyLndoZW4oJy9maWxtLzpjb250ZW50X2lkJywge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9hcHAvY29udGVudC1jYXJkL2NvbnRlbnQtY2FyZC5odG1sJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogJ0ZpbG1DYXJkQ3RybCdcclxuICAgICAgICB9KS53aGVuKCcvc2VyaWFsLzpjb250ZW50X2lkJywge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9hcHAvY29udGVudC1jYXJkL2NvbnRlbnQtY2FyZC5odG1sJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogJ1NlcmlhbENhcmRDdHJsJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIEZpbG1DYXJkQ3RybCgpIHtcclxuICAgICAgICBcIm5nSW5qZWN0XCI7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gU2VyaWFsQ2FyZEN0cmwoKSB7XHJcbiAgICAgICAgXCJuZ0luamVjdFwiO1xyXG4gICAgfVxyXG4gICAgXHJcbn0pKCk7XG4vKipcclxuICogQ3JlYXRlZCBieSBnb29kbCBvbiA0LzIvMjAxNi5cclxuICovXHJcbihmdW5jdGlvbigpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdDb250cm9sc01vZHVsZScsIFsnY29udHJvbC5pbnB1dC1jb250cm9sJywgJ2NvbnRyb2wua2lub3BvaXNrLWNvbnRyb2wnXSk7XHJcbn0pKCk7XG4vKipcclxuICogQ3JlYXRlZCBieSBnb29kbCBvbiAzLzkvMjAxNi5cclxuICovXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnSXRlbU1vZHVsZScsIFtdKVxyXG4gICAgICAgIC5kaXJlY3RpdmUoJ2NvbnRlbnRJdGVtJywgY29udGVudEl0ZW0pO1xyXG5cclxuICAgIGNvbnRlbnRJdGVtLiRpbmplY3QgPSBbJyRsb2NhdGlvbiddO1xyXG4gICAgZnVuY3Rpb24gY29udGVudEl0ZW0oJGxvY2F0aW9uKSB7XHJcbiAgICAgICAgXCJuZ0luamVjdFwiO1xyXG4gICAgICAgIGZ1bmN0aW9uIGxpbmtlcihzY29wZSwgZWxlbWVudCwgYXR0cikge1xyXG4gICAgICAgICAgICBlbGVtZW50Lm9uKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoXCIvXCIgKyBhbmd1bGFyLmxvd2VyY2FzZShzY29wZS5pdGVtLnR5cGUpICtcIi9cIiArIHNjb3BlLml0ZW0uaWQpO1xyXG4gICAgICAgICAgICAgICAgc2NvcGUuJGFwcGx5KCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBsaW5rOiBsaW5rZXIsXHJcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXHJcbiAgICAgICAgICAgIHJlcGxhY2U6IHRydWUsXHJcbiAgICAgICAgICAgIHNjb3BlOiB7XHJcbiAgICAgICAgICAgICAgICBpdGVtOiAnPSdcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvYXBwL2l0ZW0vaXRlbS5odG1sJ1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn0pKCk7XG4vKipcclxuICAgICogQ3JlYXRlZCBieSBCcmFpZG5lclxyXG4gICAgKi9cclxuKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnUmVjZW50TW9kdWxlJywgW10pXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoXCJSZWNlbnRDdHJsXCIsIFJlY2VudEN0cmwpO1xyXG5cclxuICAgIFJlY2VudEN0cmwuJGluamVjdCA9IFsnJHNjb3BlJ107XHJcbiAgICBmdW5jdGlvbiBSZWNlbnRDdHJsKCRzY29wZSkge1xyXG4gICAgICAgIFwibmdJbmplY3RcIjtcclxuICAgICAgICAkc2NvcGUuY29udGVudCA9IFtcclxuICAgICAgICAgICAge25hbWU6ICdGcm96ZW4nLCBwb3N0ZXI6ICdodHRwOi8vd3d3Lmtpbm9wb2lzay5ydS9pbWFnZXMvZmlsbV9iaWcvNDkzMjA4LmpwZyd9LFxyXG4gICAgICAgICAgICB7bmFtZTogJ0JhdG1hbiB2IFN1cGVybWFuOiBEYXduIG9mIEp1c3RpY2UnLCBwb3N0ZXI6ICdodHRwOi8vd3d3Lmtpbm9wb2lzay5ydS9pbWFnZXMvZmlsbV9iaWcvNzcwNjMxLmpwZyd9LFxyXG4gICAgICAgICAgICB7bmFtZTogJ1RoZSBKdXN0aWNlIExlYWd1ZSBQYXJ0IE9uZScsIHBvc3RlcjogJ2h0dHA6Ly93d3cua2lub3BvaXNrLnJ1L2ltYWdlcy9maWxtX2JpZy80MjQ5OTQuanBnJ30sXHJcbiAgICAgICAgICAgIHtuYW1lOiAnVGhlIGZsYXNoJywgcG9zdGVyOiAnaHR0cDovL3d3dy5raW5vcG9pc2sucnUvaW1hZ2VzL2ZpbG1fYmlnLzgxNzUwNi5qcGcnfSxcclxuICAgICAgICAgICAge25hbWU6ICdUaGUgSnVzdGljZSBMZWFndWUgUGFydCBPbmUnLCBwb3N0ZXI6ICdodHRwOi8vd3d3Lmtpbm9wb2lzay5ydS9pbWFnZXMvZmlsbV9iaWcvNDI0OTk0LmpwZyd9LFxyXG4gICAgICAgICAgICB7bmFtZTogJ0Zyb3plbicsIHBvc3RlcjogJ2h0dHA6Ly93d3cua2lub3BvaXNrLnJ1L2ltYWdlcy9maWxtX2JpZy80OTMyMDguanBnJ30sXHJcbiAgICAgICAgICAgIHtuYW1lOiAnQmF0bWFuIHYgU3VwZXJtYW46IERhd24gb2YgSnVzdGljZScsIHBvc3RlcjogJ2h0dHA6Ly93d3cua2lub3BvaXNrLnJ1L2ltYWdlcy9maWxtX2JpZy83NzA2MzEuanBnJ30sXHJcbiAgICAgICAgICAgIHtuYW1lOiAnVW50aXRsZWQgU3BpZGVyLU1hbiBSZWJvb3QnLCBwb3N0ZXI6ICdodHRwOi8vd3d3Lmtpbm9wb2lzay5ydS9pbWFnZXMvZmlsbV9iaWcvNjkwNTkzLmpwZyd9XHJcbiAgICAgICAgXTtcclxuICAgIH1cclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnUmVjZW50TW9kdWxlJykuZGlyZWN0aXZlKCdvd2xDYXJvdXNlbCcsIGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICB2YXIgbGlua2VyID0gZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB2YXIgbG9hZENhcm91c2VsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5vd2xDYXJvdXNlbChcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvb3A6ZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hdjpmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2l2ZTp7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAxMjAwOntcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtczo2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOTkyOntcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtczo0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgNzY4OntcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtczozXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgNDc5OntcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtczoyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgc2NvcGUuJHdhdGNoQ29sbGVjdGlvbihhdHRyLm93bENhcm91c2VsLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBsb2FkQ2Fyb3VzZWwoKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlc3RyaWN0OiBcIkFcIixcclxuICAgICAgICAgICAgbGluazogbGlua2VyXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICB9KTtcclxufSkoKTtcbi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGdvb2RsIG9uIDMvMjEvMjAxNi5cclxuICovXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICBcclxuICAgIFJvdXRlQ29uZmlnLiRpbmplY3QgPSBbXCIkcm91dGVQcm92aWRlclwiXTtcclxuICAgIFByb2ZpbGVDb25maWcuJGluamVjdCA9IFtcIiRyb290U2NvcGVcIl07XHJcbiAgICBQcm9maWxlQ3RybC4kaW5qZWN0ID0gW1wiJHNjb3BlXCJdO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ1Byb2ZpbGVNb2R1bGUnLCBbXSk7XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnUHJvZmlsZU1vZHVsZScpLmNvbmZpZyhSb3V0ZUNvbmZpZyk7XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnUHJvZmlsZU1vZHVsZScpLnJ1bihQcm9maWxlQ29uZmlnKTtcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdQcm9maWxlTW9kdWxlJykuY29udHJvbGxlcignUHJvZmlsZUN0cmwnLCBQcm9maWxlQ3RybCk7XHJcblxyXG4gICAgZnVuY3Rpb24gUm91dGVDb25maWcoJHJvdXRlUHJvdmlkZXIpIHtcclxuICAgICAgICBcIm5nSW5qZWN0XCI7XHJcbiAgICAgICAgJHJvdXRlUHJvdmlkZXIud2hlbignL3Byb2ZpbGUnLCB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL2FwcC9wcm9maWxlL3Byb2ZpbGUuaHRtbCcsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdQcm9maWxlQ3RybCdcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgZnVuY3Rpb24gUHJvZmlsZUNvbmZpZygkcm9vdFNjb3BlKSB7XHJcbiAgICAgICAgJHJvb3RTY29wZS5wcm9maWxlID0ge2xvZ2luOiBcIkJyYWlkbmVyXCIsIHBlcm1zOiBbJ3VzZXI6ZWRpdDpwcm9maWxlJ119O1xyXG4gICAgICAgICRyb290U2NvcGUuaGFzUGVybWlzc2lvbiA9IGhhc1Blcm1pc3Npb247XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGhhc1Blcm1pc3Npb24ocGVybSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcHJvZmlsZS5wZXJtcy5pbmRleE9mKHBlcm0pID4gLTE7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIFByb2ZpbGVDdHJsKCRzY29wZSkge1xyXG4gICAgICAgICduZ0luamVjdCc7XHJcbiAgICAgICAgXHJcbiAgICB9XHJcbiAgICBcclxufSkoKTtcbi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEJyYWlkbmVyIG9uIDA2LzAzLzIwMTYuXHJcbiAqL1xyXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIFJvdXRlQ29uZmlnLiRpbmplY3QgPSBbXCIkcm91dGVQcm92aWRlclwiXTtcclxuICAgIEZhc3RVcGxvYWRDdHJsLiRpbmplY3QgPSBbXCIkc2NvcGVcIl07XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnVXBsb2FkTW9kdWxlJywgWyduZ1Jlc291cmNlJ10pO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ1VwbG9hZE1vZHVsZScpLmNvbmZpZyhSb3V0ZUNvbmZpZyk7XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnVXBsb2FkTW9kdWxlJykuY29udHJvbGxlcignVXBsb2FkQ3RybCcsIFVwbG9hZEN0cmwpO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ1VwbG9hZE1vZHVsZScpLmNvbnRyb2xsZXIoJ0Zhc3RVcGxvYWRDdHJsJywgRmFzdFVwbG9hZEN0cmwpO1xyXG5cclxuICAgIGZ1bmN0aW9uIFJvdXRlQ29uZmlnKCRyb3V0ZVByb3ZpZGVyKSB7XHJcbiAgICAgICAgXCJuZ0luamVjdFwiO1xyXG4gICAgICAgICRyb3V0ZVByb3ZpZGVyLndoZW4oJy91cGxvYWQnLCB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL2FwcC91cGxvYWQvdXBsb2FkLmh0bWwnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnVXBsb2FkQ3RybCdcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIFxyXG5cclxuICAgIFVwbG9hZEN0cmwuJGluamVjdCA9IFsnJHNjb3BlJywgJ0NvbnRlbnRTZXJ2aWNlJ107XHJcbiAgICBmdW5jdGlvbiBVcGxvYWRDdHJsKCRzY29wZSwgQ29udGVudFNlcnZpY2UpIHtcclxuICAgICAgICBcIm5nSW5qZWN0XCI7XHJcbiAgICAgICAgJHNjb3BlLmNvbnRlbnQgPSBbXHJcbiAgICAgICAgICAgIHt0eXBlOiAnZmlsbScsICBuYW1lOiAnRnJvemVuJywgcG9zdGVyOiAnaHR0cDovL3d3dy5raW5vcG9pc2sucnUvaW1hZ2VzL2ZpbG1fYmlnLzQ5MzIwOC5qcGcnfSxcclxuICAgICAgICAgICAge3R5cGU6ICdzZXJpYWwnLCAgbmFtZTogJ0JhdG1hbiB2IFN1cGVybWFuOiBEYXduIG9mIEp1c3RpY2UnLCBwb3N0ZXI6ICdodHRwOi8vd3d3Lmtpbm9wb2lzay5ydS9pbWFnZXMvZmlsbV9iaWcvNzcwNjMxLmpwZyd9LFxyXG4gICAgICAgICAgICB7dHlwZTogJ3NlcmlhbCcsIG5hbWU6ICdUaGUgZmxhc2gnLCBwb3N0ZXI6ICdodHRwOi8vd3d3Lmtpbm9wb2lzay5ydS9pbWFnZXMvZmlsbV9iaWcvODE3NTA2LmpwZyd9LFxyXG4gICAgICAgICAgICB7dHlwZTogJ2ZpbG0nLCAgbmFtZTogJ1RoZSBKdXN0aWNlIExlYWd1ZSBQYXJ0IE9uZScsIHBvc3RlcjogJ2h0dHA6Ly93d3cua2lub3BvaXNrLnJ1L2ltYWdlcy9maWxtX2JpZy80MjQ5OTQuanBnJ30sXHJcbiAgICAgICAgICAgIHt0eXBlOiAnZmlsbScsICBuYW1lOiAnVW50aXRsZWQgU3BpZGVyLU1hbiBSZWJvb3QnLCBwb3N0ZXI6ICdodHRwOi8vd3d3Lmtpbm9wb2lzay5ydS9pbWFnZXMvZmlsbV9iaWcvNjkwNTkzLmpwZyd9LFxyXG4gICAgICAgICAgICB7dHlwZTogJ3NlcmlhbCcsICBuYW1lOiAnRnJvemVuJywgcG9zdGVyOiAnaHR0cDovL3d3dy5raW5vcG9pc2sucnUvaW1hZ2VzL2ZpbG1fYmlnLzQ5MzIwOC5qcGcnfVxyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIC8vIGFuZ3VsYXIuZm9yRWFjaCgkc2NvcGUuY29udGVudCwgZnVuY3Rpb24gKGNvbnRlbnQpIHtcclxuICAgICAgICAvLyAgICAgQ29udGVudFNlcnZpY2UuY3JlYXRlQ29udGVudChjb250ZW50KTtcclxuICAgICAgICAvLyB9KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgZnVuY3Rpb24gRmFzdFVwbG9hZEN0cmwoJHNjb3BlKSB7XHJcbiAgICAgICAgXHJcbiAgICB9XHJcblxyXG59KSgpO1xuLyoqXHJcbiAqIENyZWF0ZWQgYnkgZ29vZGwgb24gNC8yLzIwMTYuXHJcbiAqL1xyXG5cclxuXHJcbmFuZ3VsYXIubW9kdWxlKCdjb250cm9sLmlucHV0LWNvbnRyb2wnLCBbXSlcclxuICAgIC5kaXJlY3RpdmUoJ2xtSW5wdXQnLCBsbUlucHV0KTtcclxuXHJcbmZ1bmN0aW9uIGxtSW5wdXQoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHNjb3BlOiB7XHJcbiAgICAgICAgICAgIGJpbmRNb2RlbDonPW5nTW9kZWwnXHJcbiAgICAgICAgfSxcclxuICAgICAgICByZXF1aXJlOiAnbmdNb2RlbCcsXHJcbiAgICAgICAgdHJhbnNjbHVkZTogdHJ1ZSxcclxuICAgICAgICAndGVtcGxhdGVVcmwnOiAnL2FwcC9jb250cm9sbC9pbnB1dC9pbnB1dC1jb250cm9sLmh0bWwnLFxyXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbSwgYXR0ciwgbmdNb2RlbCkge1xyXG4gICAgICAgICAgICBcInVzZSBzdHJpY3RcIjtcclxuICAgICAgICAgICAgLy8gZWxlbS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vICAgICBlbGVtLmFkZENsYXNzKCdsbS1pbnB1dC1mb2N1c2VkJyk7XHJcbiAgICAgICAgICAgIC8vIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn1cbi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEt1em5ldHNvdk5FIG9uIDA0LjA0LjIwMTYuXHJcbiAqL1xyXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NvbnRyb2wua2lub3BvaXNrLWNvbnRyb2wnLCBbXSk7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ0NvbnRyb2xzTW9kdWxlJykuZGlyZWN0aXZlKCdsbS1raW5vcG9pc2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgXHJcbiAgICB9KTtcclxuXHJcbn0pKCk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgZ29vZGwgb24gMy85LzIwMTYuXHJcbiAqL1xyXG5cclxuKGZ1bmN0aW9uICgpIHtcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdDb250ZW50TW9kdWxlJywgWydDb250ZW50U2VydmljZXMnXSlcclxuICAgICAgICAuY29uZmlnKFJvdXRlQ29uZmlnKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdBbGxDb250ZW50Q3RybCcsIEFsbENvbnRlbnRDdHJsKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdTZXJpYWxDb250ZW50Q3RybCcsIFNlcmlhbENvbnRlbnRDdHJsKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdGaWxtQ29udGVudEN0cmwnLCBGaWxtQ29udGVudEN0cmwpO1xyXG5cclxuICAgIGZ1bmN0aW9uIFJvdXRlQ29uZmlnKCRyb3V0ZVByb3ZpZGVyKSB7XHJcbiAgICAgICAgXCJuZ0luamVjdFwiO1xyXG4gICAgICAgICRyb3V0ZVByb3ZpZGVyLndoZW4oJy8nLCB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL2FwcC9jb250ZW50L2NvbnRlbnQuaHRtbCcsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdBbGxDb250ZW50Q3RybCdcclxuICAgICAgICB9KS53aGVuKCcvZmlsbScsIHtcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvYXBwL2NvbnRlbnQvY29udGVudC5odG1sJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogJ0ZpbG1Db250ZW50Q3RybCdcclxuICAgICAgICB9KS53aGVuKCcvc2VyaWFsJywge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9hcHAvY29udGVudC9jb250ZW50Lmh0bWwnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnU2VyaWFsQ29udGVudEN0cmwnXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgQWxsQ29udGVudEN0cmwuJGluamVjdCA9IFsnJHNjb3BlJywgJ0NvbnRlbnRTZXJ2aWNlJ107XHJcbiAgICBmdW5jdGlvbiBBbGxDb250ZW50Q3RybCgkc2NvcGUsIENvbnRlbnRTZXJ2aWNlKSB7XHJcbiAgICAgICAgXCJuZ0luamVjdFwiO1xyXG4gICAgICAgICRzY29wZS5jb250ZW50ID0gQ29udGVudFNlcnZpY2UuZmluZENvbnRlbnQoKTtcclxuICAgIH1cclxuXHJcbiAgICBGaWxtQ29udGVudEN0cmwuJGluamVjdCA9IFsnJHNjb3BlJywgJ0NvbnRlbnRTZXJ2aWNlJ107XHJcbiAgICBmdW5jdGlvbiBGaWxtQ29udGVudEN0cmwoJHNjb3BlLCBDb250ZW50U2VydmljZSkge1xyXG4gICAgICAgIFwibmdJbmplY3RcIjtcclxuICAgICAgICAkc2NvcGUuY29udGVudCA9IENvbnRlbnRTZXJ2aWNlLmZpbmRDb250ZW50KG51bGwsICdGaWxtJyk7XHJcbiAgICB9XHJcblxyXG4gICAgU2VyaWFsQ29udGVudEN0cmwuJGluamVjdCA9IFsnJHNjb3BlJywgJ0NvbnRlbnRTZXJ2aWNlJ107XHJcbiAgICBmdW5jdGlvbiBTZXJpYWxDb250ZW50Q3RybCgkc2NvcGUsIENvbnRlbnRTZXJ2aWNlKSB7XHJcbiAgICAgICAgXCJuZ0luamVjdFwiO1xyXG4gICAgICAgICRzY29wZS5jb250ZW50ID0gQ29udGVudFNlcnZpY2UuZmluZENvbnRlbnQobnVsbCwgJ1NlcmlhbCcpO1xyXG4gICAgfVxyXG59KSgpOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGdvb2RsIG9uIDMvOS8yMDE2LlxyXG4gKi9cclxuKGZ1bmN0aW9uICgpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ0NvbnRlbnRTZXJ2aWNlcycsIFsnbmdSZXNvdXJjZSddKS5zZXJ2aWNlKCdDb250ZW50U2VydmljZScsIENvbnRlbnRTZXJ2aWNlKTtcclxuXHJcbiAgICBmdW5jdGlvbiBDb250ZW50U2VydmljZSgkcmVzb3VyY2UpIHtcclxuICAgICAgICBcIm5nSW5qZWN0XCI7XHJcblxyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICB2YXIgQ29udGVudCA9ICRyZXNvdXJjZSgnL3Jlc3QvY29udGVudCcsIHt9LCB7fSk7XHJcbiAgICAgICAgc2VsZi5maW5kQ29udGVudCA9IGZpbmRDb250ZW50O1xyXG4gICAgICAgIHNlbGYuY3JlYXRlQ29udGVudCA9IGNyZWF0ZUNvbnRlbnQ7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGZpbmRDb250ZW50KG5hbWUsIHR5cGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIENvbnRlbnQucXVlcnkoe25hbWU6IG5hbWUsIHR5cGU6IHR5cGV9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUNvbnRlbnQoY29udGVudERhdGEpIHtcclxuICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSBuZXcgQ29udGVudChjb250ZW50RGF0YSk7XHJcbiAgICAgICAgICAgIGNvbnRlbnQuJHNhdmUoKTtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBzZWxmO1xyXG4gICAgfVxyXG59KSgpO1xyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBnb29kbCBvbiAzLzEzLzIwMTYuXHJcbiAqL1xyXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ0NvbnRlbnRDYXJkTW9kdWxlJywgW10pO1xyXG4gICAgXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnQ29udGVudENhcmRNb2R1bGUnKVxyXG4gICAgICAgIC5jb25maWcoUm91dGVDb25maWcpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0ZpbG1DYXJkQ3RybCcsIEZpbG1DYXJkQ3RybClcclxuICAgICAgICAuY29udHJvbGxlcignU2VyaWFsQ2FyZEN0cmwnLCBTZXJpYWxDYXJkQ3RybCk7XHJcblxyXG4gICAgZnVuY3Rpb24gUm91dGVDb25maWcoJHJvdXRlUHJvdmlkZXIpIHtcclxuICAgICAgICBcIm5nSW5qZWN0XCI7XHJcbiAgICAgICAgJHJvdXRlUHJvdmlkZXIud2hlbignL2ZpbG0vOmNvbnRlbnRfaWQnLCB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL2FwcC9jb250ZW50LWNhcmQvY29udGVudC1jYXJkLmh0bWwnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnRmlsbUNhcmRDdHJsJ1xyXG4gICAgICAgIH0pLndoZW4oJy9zZXJpYWwvOmNvbnRlbnRfaWQnLCB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL2FwcC9jb250ZW50LWNhcmQvY29udGVudC1jYXJkLmh0bWwnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnU2VyaWFsQ2FyZEN0cmwnXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gRmlsbUNhcmRDdHJsKCkge1xyXG4gICAgICAgIFwibmdJbmplY3RcIjtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBTZXJpYWxDYXJkQ3RybCgpIHtcclxuICAgICAgICBcIm5nSW5qZWN0XCI7XHJcbiAgICB9XHJcbiAgICBcclxufSkoKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBnb29kbCBvbiA0LzIvMjAxNi5cclxuICovXHJcbihmdW5jdGlvbigpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdDb250cm9sc01vZHVsZScsIFsnY29udHJvbC5pbnB1dC1jb250cm9sJywgJ2NvbnRyb2wua2lub3BvaXNrLWNvbnRyb2wnXSk7XHJcbn0pKCk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgZ29vZGwgb24gMy85LzIwMTYuXHJcbiAqL1xyXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ0l0ZW1Nb2R1bGUnLCBbXSlcclxuICAgICAgICAuZGlyZWN0aXZlKCdjb250ZW50SXRlbScsIGNvbnRlbnRJdGVtKTtcclxuXHJcbiAgICBjb250ZW50SXRlbS4kaW5qZWN0ID0gWyckbG9jYXRpb24nXTtcclxuICAgIGZ1bmN0aW9uIGNvbnRlbnRJdGVtKCRsb2NhdGlvbikge1xyXG4gICAgICAgIFwibmdJbmplY3RcIjtcclxuICAgICAgICBmdW5jdGlvbiBsaW5rZXIoc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcclxuICAgICAgICAgICAgZWxlbWVudC5vbignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKFwiL1wiICsgYW5ndWxhci5sb3dlcmNhc2Uoc2NvcGUuaXRlbS50eXBlKSArXCIvXCIgKyBzY29wZS5pdGVtLmlkKTtcclxuICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbGluazogbGlua2VyLFxyXG4gICAgICAgICAgICByZXN0cmljdDogJ0UnLFxyXG4gICAgICAgICAgICByZXBsYWNlOiB0cnVlLFxyXG4gICAgICAgICAgICBzY29wZToge1xyXG4gICAgICAgICAgICAgICAgaXRlbTogJz0nXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL2FwcC9pdGVtL2l0ZW0uaHRtbCdcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59KSgpOyIsIi8qKlxyXG4gICAgKiBDcmVhdGVkIGJ5IEJyYWlkbmVyXHJcbiAgICAqL1xyXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdSZWNlbnRNb2R1bGUnLCBbXSlcclxuICAgICAgICAuY29udHJvbGxlcihcIlJlY2VudEN0cmxcIiwgUmVjZW50Q3RybCk7XHJcblxyXG4gICAgUmVjZW50Q3RybC4kaW5qZWN0ID0gWyckc2NvcGUnXTtcclxuICAgIGZ1bmN0aW9uIFJlY2VudEN0cmwoJHNjb3BlKSB7XHJcbiAgICAgICAgXCJuZ0luamVjdFwiO1xyXG4gICAgICAgICRzY29wZS5jb250ZW50ID0gW1xyXG4gICAgICAgICAgICB7bmFtZTogJ0Zyb3plbicsIHBvc3RlcjogJ2h0dHA6Ly93d3cua2lub3BvaXNrLnJ1L2ltYWdlcy9maWxtX2JpZy80OTMyMDguanBnJ30sXHJcbiAgICAgICAgICAgIHtuYW1lOiAnQmF0bWFuIHYgU3VwZXJtYW46IERhd24gb2YgSnVzdGljZScsIHBvc3RlcjogJ2h0dHA6Ly93d3cua2lub3BvaXNrLnJ1L2ltYWdlcy9maWxtX2JpZy83NzA2MzEuanBnJ30sXHJcbiAgICAgICAgICAgIHtuYW1lOiAnVGhlIEp1c3RpY2UgTGVhZ3VlIFBhcnQgT25lJywgcG9zdGVyOiAnaHR0cDovL3d3dy5raW5vcG9pc2sucnUvaW1hZ2VzL2ZpbG1fYmlnLzQyNDk5NC5qcGcnfSxcclxuICAgICAgICAgICAge25hbWU6ICdUaGUgZmxhc2gnLCBwb3N0ZXI6ICdodHRwOi8vd3d3Lmtpbm9wb2lzay5ydS9pbWFnZXMvZmlsbV9iaWcvODE3NTA2LmpwZyd9LFxyXG4gICAgICAgICAgICB7bmFtZTogJ1RoZSBKdXN0aWNlIExlYWd1ZSBQYXJ0IE9uZScsIHBvc3RlcjogJ2h0dHA6Ly93d3cua2lub3BvaXNrLnJ1L2ltYWdlcy9maWxtX2JpZy80MjQ5OTQuanBnJ30sXHJcbiAgICAgICAgICAgIHtuYW1lOiAnRnJvemVuJywgcG9zdGVyOiAnaHR0cDovL3d3dy5raW5vcG9pc2sucnUvaW1hZ2VzL2ZpbG1fYmlnLzQ5MzIwOC5qcGcnfSxcclxuICAgICAgICAgICAge25hbWU6ICdCYXRtYW4gdiBTdXBlcm1hbjogRGF3biBvZiBKdXN0aWNlJywgcG9zdGVyOiAnaHR0cDovL3d3dy5raW5vcG9pc2sucnUvaW1hZ2VzL2ZpbG1fYmlnLzc3MDYzMS5qcGcnfSxcclxuICAgICAgICAgICAge25hbWU6ICdVbnRpdGxlZCBTcGlkZXItTWFuIFJlYm9vdCcsIHBvc3RlcjogJ2h0dHA6Ly93d3cua2lub3BvaXNrLnJ1L2ltYWdlcy9maWxtX2JpZy82OTA1OTMuanBnJ31cclxuICAgICAgICBdO1xyXG4gICAgfVxyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdSZWNlbnRNb2R1bGUnKS5kaXJlY3RpdmUoJ293bENhcm91c2VsJywgZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgIHZhciBsaW5rZXIgPSBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHZhciBsb2FkQ2Fyb3VzZWwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50Lm93bENhcm91c2VsKFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9vcDpmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmF2OmZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zaXZlOntcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEyMDA6e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zOjZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA5OTI6e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zOjRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA3Njg6e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zOjNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA0Nzk6e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zOjJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBzY29wZS4kd2F0Y2hDb2xsZWN0aW9uKGF0dHIub3dsQ2Fyb3VzZWwsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGxvYWRDYXJvdXNlbCgpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmVzdHJpY3Q6IFwiQVwiLFxyXG4gICAgICAgICAgICBsaW5rOiBsaW5rZXJcclxuICAgICAgICB9O1xyXG5cclxuICAgIH0pO1xyXG59KSgpOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGdvb2RsIG9uIDMvMjEvMjAxNi5cclxuICovXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICBcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdQcm9maWxlTW9kdWxlJywgW10pO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ1Byb2ZpbGVNb2R1bGUnKS5jb25maWcoUm91dGVDb25maWcpO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ1Byb2ZpbGVNb2R1bGUnKS5ydW4oUHJvZmlsZUNvbmZpZyk7XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnUHJvZmlsZU1vZHVsZScpLmNvbnRyb2xsZXIoJ1Byb2ZpbGVDdHJsJywgUHJvZmlsZUN0cmwpO1xyXG5cclxuICAgIGZ1bmN0aW9uIFJvdXRlQ29uZmlnKCRyb3V0ZVByb3ZpZGVyKSB7XHJcbiAgICAgICAgXCJuZ0luamVjdFwiO1xyXG4gICAgICAgICRyb3V0ZVByb3ZpZGVyLndoZW4oJy9wcm9maWxlJywge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9hcHAvcHJvZmlsZS9wcm9maWxlLmh0bWwnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnUHJvZmlsZUN0cmwnXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGZ1bmN0aW9uIFByb2ZpbGVDb25maWcoJHJvb3RTY29wZSkge1xyXG4gICAgICAgICRyb290U2NvcGUucHJvZmlsZSA9IHtsb2dpbjogXCJCcmFpZG5lclwiLCBwZXJtczogWyd1c2VyOmVkaXQ6cHJvZmlsZSddfTtcclxuICAgICAgICAkcm9vdFNjb3BlLmhhc1Blcm1pc3Npb24gPSBoYXNQZXJtaXNzaW9uO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBoYXNQZXJtaXNzaW9uKHBlcm0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHByb2ZpbGUucGVybXMuaW5kZXhPZihwZXJtKSA+IC0xO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBQcm9maWxlQ3RybCgkc2NvcGUpIHtcclxuICAgICAgICAnbmdJbmplY3QnO1xyXG4gICAgICAgIFxyXG4gICAgfVxyXG4gICAgXHJcbn0pKCk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgQnJhaWRuZXIgb24gMDYvMDMvMjAxNi5cclxuICovXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ1VwbG9hZE1vZHVsZScsIFsnbmdSZXNvdXJjZSddKTtcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdVcGxvYWRNb2R1bGUnKS5jb25maWcoUm91dGVDb25maWcpO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ1VwbG9hZE1vZHVsZScpLmNvbnRyb2xsZXIoJ1VwbG9hZEN0cmwnLCBVcGxvYWRDdHJsKTtcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdVcGxvYWRNb2R1bGUnKS5jb250cm9sbGVyKCdGYXN0VXBsb2FkQ3RybCcsIEZhc3RVcGxvYWRDdHJsKTtcclxuXHJcbiAgICBmdW5jdGlvbiBSb3V0ZUNvbmZpZygkcm91dGVQcm92aWRlcikge1xyXG4gICAgICAgIFwibmdJbmplY3RcIjtcclxuICAgICAgICAkcm91dGVQcm92aWRlci53aGVuKCcvdXBsb2FkJywge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9hcHAvdXBsb2FkL3VwbG9hZC5odG1sJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogJ1VwbG9hZEN0cmwnXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuXHJcbiAgICBVcGxvYWRDdHJsLiRpbmplY3QgPSBbJyRzY29wZScsICdDb250ZW50U2VydmljZSddO1xyXG4gICAgZnVuY3Rpb24gVXBsb2FkQ3RybCgkc2NvcGUsIENvbnRlbnRTZXJ2aWNlKSB7XHJcbiAgICAgICAgXCJuZ0luamVjdFwiO1xyXG4gICAgICAgICRzY29wZS5jb250ZW50ID0gW1xyXG4gICAgICAgICAgICB7dHlwZTogJ2ZpbG0nLCAgbmFtZTogJ0Zyb3plbicsIHBvc3RlcjogJ2h0dHA6Ly93d3cua2lub3BvaXNrLnJ1L2ltYWdlcy9maWxtX2JpZy80OTMyMDguanBnJ30sXHJcbiAgICAgICAgICAgIHt0eXBlOiAnc2VyaWFsJywgIG5hbWU6ICdCYXRtYW4gdiBTdXBlcm1hbjogRGF3biBvZiBKdXN0aWNlJywgcG9zdGVyOiAnaHR0cDovL3d3dy5raW5vcG9pc2sucnUvaW1hZ2VzL2ZpbG1fYmlnLzc3MDYzMS5qcGcnfSxcclxuICAgICAgICAgICAge3R5cGU6ICdzZXJpYWwnLCBuYW1lOiAnVGhlIGZsYXNoJywgcG9zdGVyOiAnaHR0cDovL3d3dy5raW5vcG9pc2sucnUvaW1hZ2VzL2ZpbG1fYmlnLzgxNzUwNi5qcGcnfSxcclxuICAgICAgICAgICAge3R5cGU6ICdmaWxtJywgIG5hbWU6ICdUaGUgSnVzdGljZSBMZWFndWUgUGFydCBPbmUnLCBwb3N0ZXI6ICdodHRwOi8vd3d3Lmtpbm9wb2lzay5ydS9pbWFnZXMvZmlsbV9iaWcvNDI0OTk0LmpwZyd9LFxyXG4gICAgICAgICAgICB7dHlwZTogJ2ZpbG0nLCAgbmFtZTogJ1VudGl0bGVkIFNwaWRlci1NYW4gUmVib290JywgcG9zdGVyOiAnaHR0cDovL3d3dy5raW5vcG9pc2sucnUvaW1hZ2VzL2ZpbG1fYmlnLzY5MDU5My5qcGcnfSxcclxuICAgICAgICAgICAge3R5cGU6ICdzZXJpYWwnLCAgbmFtZTogJ0Zyb3plbicsIHBvc3RlcjogJ2h0dHA6Ly93d3cua2lub3BvaXNrLnJ1L2ltYWdlcy9maWxtX2JpZy80OTMyMDguanBnJ31cclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICAvLyBhbmd1bGFyLmZvckVhY2goJHNjb3BlLmNvbnRlbnQsIGZ1bmN0aW9uIChjb250ZW50KSB7XHJcbiAgICAgICAgLy8gICAgIENvbnRlbnRTZXJ2aWNlLmNyZWF0ZUNvbnRlbnQoY29udGVudCk7XHJcbiAgICAgICAgLy8gfSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIEZhc3RVcGxvYWRDdHJsKCRzY29wZSkge1xyXG4gICAgICAgIFxyXG4gICAgfVxyXG5cclxufSkoKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBLdXpuZXRzb3ZORSBvbiAwNC4wNC4yMDE2LlxyXG4gKi9cclxuKGZ1bmN0aW9uICgpIHtcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdjb250cm9sLmtpbm9wb2lzay1jb250cm9sJywgW10pO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdDb250cm9sc01vZHVsZScpLmRpcmVjdGl2ZSgnbG0ta2lub3BvaXNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIFxyXG4gICAgfSk7XHJcblxyXG59KSgpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
